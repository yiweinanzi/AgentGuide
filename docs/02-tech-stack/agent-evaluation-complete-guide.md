# AI Agent è¯„ä¼°å®Œå…¨æŒ‡å—
## ç»™å¤§æ¨¡å‹ç®—æ³•å·¥ç¨‹å¸ˆçš„å®æˆ˜æ‰‹å†Œï¼ˆé™„åæ§½ä¸çœŸç›¸ï¼‰

## å†™åœ¨å‰é¢

å¦‚æœä½ æ­£åœ¨å¼€å‘ AI Agentï¼Œå¤§æ¦‚ç‡å·²ç»ä½“éªŒè¿‡è¿™ç§å´©æºƒæ—¶åˆ»ï¼š

- å‘¨ä¸€æµ‹è¯•ï¼ŒAgent è¡¨ç°å®Œç¾ âœ¨
- å‘¨ä¸‰ä¸Šçº¿ï¼ŒAgent å¼€å§‹å‘ç–¯ ğŸ¤¯
- å‘¨äº”å›æ»šï¼Œäº§å“ç»ç†æ‘”æ¯å­ ğŸ’¥

æ¬¢è¿æ¥åˆ° Agent å¼€å‘çš„"è–›å®šè°”æµ‹è¯•"ä¸–ç•Œï¼šåŒæ ·çš„è¾“å…¥ï¼Œä»Šå¤©å¯¹æ˜å¤©é”™ï¼Œä¸Šåˆè¡Œä¸‹åˆå´©ã€‚

è¿™ç¯‡æ–‡æ¡£åŸºäº Anthropic çš„ä¸‡å­—é•¿æ–‡ï¼ŒåŠ ä¸Šæˆ‘ä»¬çš„ç†è§£å’Œåæ§½ï¼Œå¸¦ä½ ç³»ç»Ÿæ€§åœ°æå®š Agent è¯„ä¼°è¿™ä¸ª"ç„å­¦"ã€‚

---

## ç›®å½•

- [1. ä¸ºä»€ä¹ˆä¼ ç»Ÿæµ‹è¯•æ–¹æ³•å…¨çº¿å´©æºƒ](#1-ä¸ºä»€ä¹ˆä¼ ç»Ÿæµ‹è¯•æ–¹æ³•å…¨çº¿å´©æºƒ)
- [2. é‡æ–°è®¤è¯†è¯„ä¼°ç³»ç»Ÿ](#2-é‡æ–°è®¤è¯†è¯„ä¼°ç³»ç»Ÿ)
- [3. ä¸‰ç§è¯„åˆ†å™¨çš„æ­£ç¡®æ‰“å¼€æ–¹å¼](#3-ä¸‰ç§è¯„åˆ†å™¨çš„æ­£ç¡®æ‰“å¼€æ–¹å¼)
- [4. å››ç±» Agent çš„è¯„ä¼°ç§˜ç±](#4-å››ç±»-agent-çš„è¯„ä¼°ç§˜ç±)
- [5. é©¯æœéç¡®å®šæ€§è¿™å¤´æ€ªå…½](#5-é©¯æœéç¡®å®šæ€§è¿™å¤´æ€ªå…½)
- [6. ä»é›¶å¼€å§‹çš„å…«æ­¥è·¯çº¿å›¾](#6-ä»é›¶å¼€å§‹çš„å…«æ­¥è·¯çº¿å›¾)
- [7. è¯„ä¼°æ–¹æ³•çš„ç‘å£«å¥¶é…ªç»„åˆæ‹³](#7-è¯„ä¼°æ–¹æ³•çš„ç‘å£«å¥¶é…ªç»„åˆæ‹³)
- [8. å·¥å…·é€‰æ‹©ï¼šé¿å‘æŒ‡å—](#8-å·¥å…·é€‰æ‹©é¿å‘æŒ‡å—)
- [9. æœ€åçš„çœŸç›¸ä¸å»ºè®®](#9-æœ€åçš„çœŸç›¸ä¸å»ºè®®)

---

## 1. ä¸ºä»€ä¹ˆä¼ ç»Ÿæµ‹è¯•æ–¹æ³•å…¨çº¿å´©æºƒ

### 1.1 Agent çš„ä¸¤ä¸ª"åéª¨"ç‰¹æ€§

è¿˜è®°å¾—ä½ å†™çš„ç¬¬ä¸€ä¸ªå•å…ƒæµ‹è¯•å—ï¼Ÿè¾“å…¥ç¡®å®šã€è¾“å‡ºç¡®å®šã€æ–­è¨€é€šè¿‡ã€æ”¶å·¥å›å®¶ã€‚å¤šä¹ˆç¾å¥½çš„æ—¶ä»£ï¼

ä½† AI Agent æ¥äº†ï¼Œå¸¦ç€ä¸¤ä¸ªæ€æ‰‹é”ï¼Œä¸“é—¨ç ´åä½ çš„æµ‹è¯•ä¿¡ä»°ï¼š

![](https://www.anthropic.com/_next/image?url=https%3A%2F%2Fwww-cdn.anthropic.com%2Fimages%2F4zrzovbb%2Fwebsite%2Fbd42e7b2f3e9bb5218142796d3ede4816588dec0-4584x2834.png&w=3840&q=75)

#### ç‰¹æ€§ä¸€ï¼šéç¡®å®šæ€§ï¼ˆä»Šå¤©çš„æˆ‘æ‰“è´¥æ˜¨å¤©çš„æˆ‘ï¼‰

```python
# ä¼ ç»Ÿå‡½æ•°
def add(a, b):
    return a + b  # æ°¸è¿œè¿”å› a+bï¼Œå¤šä¹ˆå¯é ï¼

# AI Agent
def ai_agent(prompt):
    return ??? # ğŸ² å–å†³äºï¼š
    # - æ¨¡å‹ç‰ˆæœ¬ï¼ˆSonnet 3.5 vs 4.0ï¼‰
    # - é‡‡æ ·å‚æ•°ï¼ˆtemperature 0.7 è¿˜æ˜¯ 1.0ï¼Ÿï¼‰
    # - ä¸Šä¸‹æ–‡ï¼ˆå¯¹è¯å†å²å½±å“åˆ¤æ–­ï¼‰
    # - éšæœºæ•°ç§å­ï¼ˆå°±æ˜¯è¿™ä¹ˆç„å­¦ï¼‰
```

**çœŸå®æ¡ˆä¾‹**ï¼š
æŸå›¢é˜Ÿå‘ç°ä»–ä»¬çš„ä»£ç è¡¥å…¨ Agentï¼ŒåŒä¸€ä¸ªé—®é¢˜é—®10éï¼Œèƒ½ç»™å‡º10ç§ä¸åŒæ–¹æ¡ˆã€‚æœ‰6ç§èƒ½è·‘ï¼Œ3ç§æœ‰bugï¼Œ1ç§ç®€ç›´æ˜¯å¤©æ‰ä¹‹ä½œã€‚

é—®é¢˜æ˜¯ï¼š**ä½ è¯¥æµ‹å“ªä¸€ä¸ªï¼Ÿ**

#### ç‰¹æ€§äºŒï¼šå¤šè½®äº¤äº’çš„è´è¶æ•ˆåº”

ä¼ ç»Ÿè½¯ä»¶ï¼šè¾“å…¥ â†’ å¤„ç† â†’ è¾“å‡ºï¼Œä¸€æ¡ç›´çº¿èµ°åˆ°åº•ã€‚

AI Agentï¼šè¾“å…¥ â†’ ğŸ¤”æ€è€ƒ â†’ ğŸ”§è°ƒå·¥å…· â†’ ğŸ’¾æ”¹çŠ¶æ€ â†’ ğŸ¤”å†æ€è€ƒ â†’ ğŸ”§å†è°ƒå·¥å…· â†’ ...ï¼ˆå¾ªç¯Næ¬¡ï¼‰

**æ›´è¦å‘½çš„æ˜¯**ï¼šç¬¬3è½®çš„å°å¤±è¯¯ï¼Œä¼šåœ¨ç¬¬10è½®å¼•å‘ç¾éš¾ã€‚

```
è½®1: "è¯»å–ç”¨æˆ·è®¢å•" âœ…
è½®2: "è®¡ç®—é€€æ¬¾é‡‘é¢" âœ… (ä½†ç®—é”™äº†0.01å…ƒ)
è½®3: "æ›´æ–°æ•°æ®åº“" âœ…
è½®4: "å‘é€ç¡®è®¤é‚®ä»¶" âœ…
...
è½®10: "ç”Ÿæˆè´¢åŠ¡æŠ¥è¡¨" âŒ (å¯¹ä¸ä¸Šè´¦ï¼Œç‚¸äº†)
```

è¿™å°±åƒæ‰“å°çƒï¼šç¬¬ä¸€æ†åäº†1æ¯«ç±³ï¼Œæœ€åé»‘å…«è¿›äº†å¯¹æ‰‹çš„è¢‹ã€‚

### 1.2 è¯„ä¼°çš„çœŸæ­£ä»·å€¼ï¼ˆä¸æ˜¯KPIï¼Œæ˜¯æ•‘å‘½ç¨»è‰ï¼‰

å¾ˆå¤šå›¢é˜Ÿæœ€åˆè§‰å¾—ï¼š"è¯„ä¼°ï¼Ÿé‚£ä¸æ˜¯æµªè´¹æ—¶é—´å—ï¼Ÿæˆ‘ä»¬æ‰‹åŠ¨æµ‹æµ‹ä¸å°±è¡Œäº†ï¼Ÿ"

ç„¶åä»–ä»¬ç»å†äº†è¿™ä¸ªå¾ªç¯ï¼š

```
ç¬¬1å‘¨: æ‰‹åŠ¨æµ‹è¯•ï¼Œæ„Ÿè§‰è‰¯å¥½ ğŸ˜Š
ç¬¬2å‘¨: ç”¨æˆ·æŠ¥bugï¼Œç´§æ€¥ä¿®å¤ ğŸ˜°
ç¬¬3å‘¨: ä¿®å¤å¼•å…¥æ–°bugï¼Œå†ç´§æ€¥ä¿®å¤ ğŸ˜±
ç¬¬4å‘¨: ä¸æ•¢æ”¹ä»£ç ï¼ŒæŠ€æœ¯å€ºå †ç§¯ ğŸ’€
ç¬¬5å‘¨: äº§å“ç»ç†é—®"ä¸ºå•¥è¿™ä¹ˆæ…¢" ğŸ¤¬
```

Anthropic å’Œ Descriptã€Bolt ç­‰å›¢é˜Ÿçš„ç»éªŒå‘Šè¯‰æˆ‘ä»¬ï¼Œ**ç³»ç»ŸåŒ–è¯„ä¼°èƒ½æ•‘å‘½**ï¼š

| ç»´åº¦        | æ²¡æœ‰è¯„ä¼°       | æœ‰è¯„ä¼°                     | å·®è·            |
| --------- | ---------- | ----------------------- | ------------- |
| **æ–°æ¨¡å‹è¿ç§»** | æ•°å‘¨æ‰‹åŠ¨æµ‹è¯•     | æ•°å¤©è‡ªåŠ¨åŒ–éªŒè¯                 | **10å€é€Ÿåº¦å·®**    |
| **çº¿ä¸Šäº‹æ•…**  | ç”¨æˆ·å‘ç°â†’ç´§æ€¥ä¿®å¤  | ä¸Šçº¿å‰æ‹¦æˆª                   | **0 vs Næ¬¡ç¿»è½¦** |
| **è´¨é‡åŸºçº¿**  | æ‹è„‘è¢‹ä¼°è®¡      | Tokenã€å»¶è¿Ÿã€æˆæœ¬ç²¾ç¡®è·Ÿè¸ª         | **æ•°æ® vs æ„Ÿè§‰**  |
| **å›¢é˜Ÿåä½œ**  | äº§å“è¯´"æ„Ÿè§‰å˜æ…¢äº†" | "Latency P95ä»1.2sâ†’1.8s" | **å¯é‡åŒ–æ²Ÿé€š**     |

**å…³é”®æ´å¯Ÿ**ï¼šè¯„ä¼°çš„ä»·å€¼åƒå¤åˆ©ï¼Œå‰æœŸçœ‹ä¸å‡ºï¼Œé•¿æœŸæŒ‡æ•°çº§å¢é•¿ã€‚

ç°åœ¨æ˜ç™½ä¸ºä»€ä¹ˆ Claude Codeã€Bolt è¿™äº›é¡¶çº§å›¢é˜Ÿéƒ½åœ¨æ­»ç£• Evals äº†å—ï¼Ÿä¸æ˜¯å› ä¸ºä»–ä»¬é—²ï¼Œæ˜¯å› ä¸º**ä¸è¿™ä¹ˆå¹²å°±æ­»å®šäº†**ã€‚

---
## 2. é‡æ–°è®¤è¯†è¯„ä¼°ç³»ç»Ÿ

### 2.1 æ ¸å¿ƒç»„ä»¶ï¼šåˆ«å†æŠŠ Agent å½“å‡½æ•°æµ‹äº†

å…ˆçœ‹ Anthropic ç»™å‡ºçš„æ¶æ„å›¾ï¼Œåˆ«æ…Œï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸ªè§£é‡Šï¼š

![](https://www.anthropic.com/_next/image?url=https%3A%2F%2Fwww-cdn.anthropic.com%2Fimages%2F4zrzovbb%2Fwebsite%2F0205b36f9639fc27f2f6566f73cb56b06f59d555-4584x2580.png&w=3840&q=75)

#### Taskï¼ˆä»»åŠ¡ï¼‰ï¼šä¸æ˜¯ Promptï¼Œæ˜¯"è€ƒé¢˜"

**é”™è¯¯ç†è§£**ï¼š
```python
task = "å¸®æˆ‘è®¢æœºç¥¨"  # âŒ è¿™ä¸æ˜¯ Taskï¼Œè¿™æ˜¯è®¸æ„¿
```

**æ­£ç¡®ç†è§£**ï¼š
```yaml
task:
  id: "flight-booking-001"
  description: "é¢„è®¢åŒ—äº¬åˆ°ä¸Šæµ·çš„æœºç¥¨ï¼Œ3æœˆ15æ—¥ï¼Œç»æµèˆ±"

  initial_state:
    database: user_profile.sql
    available_flights: flights_march.json

  success_criteria:
    - æ•°æ®åº“ä¸­æœ‰è®¢å•è®°å½•
    - ç”¨æˆ·æ”¶åˆ°ç¡®è®¤é‚®ä»¶
    - åº§ä½å·å·²åˆ†é…
    - ç§¯åˆ†å·²ç´¯ç§¯

  expected_outcome:
    flight: "CA1234"
    seat: "32A"
    price: 800
```

**å…³é”®åŒºåˆ«**ï¼šTask å¿…é¡»æœ‰æ˜ç¡®çš„"è€ƒè¯•æ ‡å‡†ç­”æ¡ˆ"ã€‚

#### Trialï¼ˆè¯•éªŒï¼‰ï¼šè·‘ä¸€æ¬¡ä¸ç®—ï¼Œè·‘åˆ°ä½ æœ

å› ä¸º Agent æœ‰éšæœºæ€§ï¼Œæ‰€ä»¥ï¼š

```python
# å•æ¬¡æµ‹è¯• = èµŒåš
result = run_once(task)  # å¯èƒ½è¿æ°”å¥½ï¼Œä¹Ÿå¯èƒ½è¿æ°”å·®

# å¤šæ¬¡è¯•éªŒ = ç»Ÿè®¡å­¦
results = [run_once(task) for _ in range(10)]
success_rate = sum(r.passed for r in results) / 10
# ç°åœ¨ä½ çŸ¥é“çœŸå®æ°´å¹³äº†
```

**å…¸å‹æ•°é‡**ï¼š
- å¿«é€ŸéªŒè¯ï¼š3æ¬¡
- æ­£å¼è¯„ä¼°ï¼š10æ¬¡
- å…³é”®ä»»åŠ¡ï¼š100æ¬¡

**çœŸå®æ•…äº‹**ï¼šæŸå›¢é˜Ÿæµ‹è¯•é€€æ¬¾åŠŸèƒ½ï¼Œå•æ¬¡æµ‹è¯•é€šè¿‡ï¼Œä¿¡å¿ƒæ»¡æ»¡ä¸Šçº¿ã€‚ç»“æœç¬¬äºŒå¤©ç”¨æˆ·æŠ•è¯‰"é€€æ¬¾å¤±è´¥"ã€‚å›å¤´æµ‹10æ¬¡ï¼Œå‘ç°åªæœ‰3æ¬¡æˆåŠŸã€‚æ¦‚ç‡ï¼š30%ã€‚

ä»–ä»¬å­¦åˆ°çš„æ•™è®­ï¼š**è·‘ä¸€æ¬¡æ˜¯æµ‹äººå“ï¼Œè·‘åæ¬¡æ˜¯æµ‹èƒ½åŠ›**ã€‚

#### Graderï¼ˆè¯„åˆ†å™¨ï¼‰ï¼šä¸æ­¢ä¸€ä¸ªæ³•å®˜

ä¼ ç»Ÿæµ‹è¯•ï¼š`assert output == expected`ï¼ˆä¸€é”¤å®šéŸ³ï¼‰

Agent è¯„ä¼°ï¼šéœ€è¦**å¤šä¸ªè¯„å§”æ‰“åˆ†**

```yaml
graders:
  - åŠŸèƒ½è¯„å§”: "ä»£ç èƒ½è·‘å—ï¼Ÿ"
  - è´¨é‡è¯„å§”: "ä»£ç å†™å¾—å¥½å—ï¼Ÿ"
  - å®‰å…¨è¯„å§”: "æœ‰æ²¡æœ‰æ¼æ´ï¼Ÿ"
  - æ•ˆç‡è¯„å§”: "æ˜¯ä¸æ˜¯ç»•äº†è¿œè·¯ï¼Ÿ"
  - ç”¨æˆ·ä½“éªŒè¯„å§”: "æ­£å¸¸äººèƒ½çœ‹æ‡‚å—ï¼Ÿ"
```

å°±åƒå¥¥è¿ä¼šä½“æ“ï¼Œä¸æ˜¯åªçœ‹è½åœ°ç¨³ä¸ç¨³ï¼Œè¿˜è¦çœ‹åŠ¨ä½œéš¾åº¦ã€è‰ºæœ¯è¡¨ç°ã€å…¨ç¨‹æµç•…åº¦ã€‚

#### Transcript vs. Outcomeï¼šå˜´ä¸Šè¯´çš„ vs å®é™…åšçš„

è¿™æ˜¯**æœ€å®¹æ˜“ç¿»è½¦çš„æ¦‚å¿µ**ï¼Œå¬å¥½äº†ï¼š

| ç»´åº¦       | Transcriptï¼ˆè½¬å½•ï¼‰  | Outcomeï¼ˆç»“æœï¼‰     |
| -------- | --------------- | --------------- |
| **æ˜¯ä»€ä¹ˆ**  | Agent çš„æ‰§è¡Œæ—¥å¿—     | ç¯å¢ƒçš„çœŸå®å˜åŒ–         |
| **åŒ…å«**   | æ€è€ƒè¿‡ç¨‹ã€å·¥å…·è°ƒç”¨ã€APIè¿”å› | æ•°æ®åº“è®°å½•ã€æ–‡ä»¶ç³»ç»Ÿã€ç³»ç»ŸçŠ¶æ€ |
| **å¯ä¿¡å—**  | âŒ Agentå¯èƒ½æ’’è°     | âœ… æ•°æ®ä¸ä¼šéª—äºº        |
| **ç”¨æ¥å¹²å˜›** | Debugã€åˆ†æè¡Œä¸º      | éªŒè¯ä»»åŠ¡æ˜¯å¦çœŸçš„å®Œæˆ      |

**ç»å…¸ç¿»è½¦æ¡ˆä¾‹**ï¼šè®¢ç¥¨ Agent

```
Transcript (Agentè¯´):
"äº²ï¼Œæ‚¨çš„æœºç¥¨å·²ç»é¢„è®¢æˆåŠŸå•¦ï¼âœˆï¸
è®¢å•å·ï¼šCA1234
åº§ä½ï¼š32A
è¯·æŸ¥æ”¶ç¡®è®¤é‚®ä»¶å“¦ï½"

Outcome (æ•°æ®åº“å®é™…):
Orders table: EMPTY
Emails sent: 0
User balance: æœªæ‰£æ¬¾

ç»“è®ºï¼šè¿™è´§åœ¨å¹ç‰› ğŸ¤¥
```

**Anthropic è¸©çš„å‘**ï¼šOpus 4.5 åœ¨ Ï„Â²-Bench çš„è®¢ç¥¨ä»»åŠ¡ä¸­ï¼Œå‘ç°äº†èˆªç©ºå…¬å¸æ”¿ç­–çš„æ¼æ´ï¼Œç»™ç”¨æˆ·æ‰¾åˆ°äº†æ›´ä¾¿å®œçš„æ–¹æ¡ˆã€‚

ç»“æœè¯„ä¼°ç³»ç»Ÿåˆ¤ï¼š**å¤±è´¥** âŒ

ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º Grader å†™æ­»äº†"å¿…é¡»æŒ‰æ ‡å‡†æµç¨‹"ã€‚

ä½†å®é™…ä¸Šï¼ŸAgent æ˜¯**å¤©æ‰** âœ¨ï¼ˆä¸ºç”¨æˆ·çœé’±äº†ï¼‰

**æ•™è®­**ï¼šåˆ«åªçœ‹ Agent æœ‰æ²¡æœ‰æŒ‰ä½ æƒ³çš„è·¯èµ°ï¼Œè¦çœ‹å®ƒæœ‰æ²¡æœ‰çœŸæ­£è§£å†³é—®é¢˜ã€‚

#### Harnessï¼ˆæ‰§è¡Œæ¡†æ¶ï¼‰ï¼šModel + è„šæ‰‹æ¶ = Agent

å¾ˆå¤šäººä»¥ä¸ºè¯„ä¼°çš„æ˜¯"æ¨¡å‹"ï¼Œé”™äº†ï¼ä½ è¯„ä¼°çš„æ˜¯ï¼š

```
Agent = Modelï¼ˆå¤§è„‘ï¼‰+ Harnessï¼ˆèº«ä½“å’Œå·¥å…·ï¼‰
```

**æ¯”å–»**ï¼š
- Model = å¨å¸ˆçš„å¨è‰º
- Harness = å¨æˆ¿çš„è®¾å¤‡å’Œé£Ÿæ

åŒæ ·çš„å¨å¸ˆï¼ˆClaude Sonnet 4.5ï¼‰ï¼Œæ”¾åœ¨ä¸åŒå¨æˆ¿ï¼ˆHarnessï¼‰ï¼š
- å¥½å¨æˆ¿ï¼šç±³å…¶æ—ä¸‰æ˜Ÿ
- çƒ‚å¨æˆ¿ï¼šé£Ÿç‰©ä¸­æ¯’

**å®é™…å½±å“**ï¼š
```python
# Harness Aï¼šå·¥å…·è§£ææœ‰ bug
agent_a.success_rate = 0.3  # 30%

# Harness Bï¼šå·¥å…·è§£æå®Œç¾
agent_b.success_rate = 0.8  # 80%

# åŒä¸€ä¸ª Modelï¼
```

æ‰€ä»¥ï¼Œ**è¯„ä¼° Agent = è¯„ä¼°æ•´ä¸ªç³»ç»Ÿ**ï¼Œä¸è¦åªæ€ªæ¨¡å‹ã€‚

### 2.2 å•è½® vs å¤šè½®ï¼šä»ç™¾ç±³å†²åˆºåˆ°é©¬æ‹‰æ¾

**å•è½®è¯„ä¼°**ï¼š
```
User: "é¦–éƒ½æ˜¯å“ªï¼Ÿ"
Agent: "åŒ—äº¬"
Grader: âœ…
```
ç®€å•ã€ç›´æ¥ã€é è°±ã€‚ä½†åªèƒ½æµ‹ç®€å•ä»»åŠ¡ã€‚

**å¤šè½®è¯„ä¼°**ï¼š
```
User: "å¸®æˆ‘é‡æ„è¿™ä¸ªé¡¹ç›®"
Agent: [è¯»æ–‡ä»¶] â†’ [åˆ†ææ¶æ„] â†’ [å†™ä»£ç ] â†’ [è·‘æµ‹è¯•]
       â†’ [å‘ç°bug] â†’ [å†æ”¹ä»£ç ] â†’ [å†æµ‹è¯•] â†’ [æäº¤PR]
       (20è½®å¯¹è¯ï¼Œè°ƒç”¨50æ¬¡å·¥å…·)
Grader: "å‘ƒ...è¿™æ€ä¹ˆåˆ¤ï¼Ÿ" ğŸ¤”
```

**å…³é”®åŒºåˆ«**ï¼š
- å•è½®ï¼šæµ‹"çŸ¥è¯†"
- å¤šè½®ï¼šæµ‹"èƒ½åŠ›"ï¼ˆè§„åˆ’ã€æ‰§è¡Œã€çº é”™ï¼‰

è€Œä¸”å¤šè½®è¯„ä¼°æœ‰ä¸ª**å¯æ€•ç‰¹æ€§**ï¼šé”™è¯¯ä¼šä¼ æ’­ã€‚

### 2.3 çœŸå®ç¿»è½¦æ¡ˆä¾‹ï¼šèªæ˜åè¢«èªæ˜è¯¯

**åœºæ™¯**ï¼šÏ„Â²-Bench èˆªç©ºè®¢ç¥¨ä»»åŠ¡

**ä»»åŠ¡è¦æ±‚**ï¼šæŒ‰ç…§èˆªç©ºå…¬å¸é€€æ”¹ç­¾æ”¿ç­–è®¢ç¥¨

**æ ‡å‡†ç­”æ¡ˆ**ï¼š
1. æŸ¥ç”¨æˆ·éœ€æ±‚
2. æŸ¥å¯ç”¨èˆªç­
3. æ£€æŸ¥é€€æ”¹ç­¾æ”¿ç­–
4. é€‰ç¬¦åˆæ”¿ç­–çš„æœ€ä¾¿å®œèˆªç­
5. ä¸‹å•

**Opus 4.5 çš„æ“ä½œ**ï¼š
1. æŸ¥ç”¨æˆ·éœ€æ±‚ âœ…
2. æŸ¥å¯ç”¨èˆªç­ âœ…
3. æ£€æŸ¥é€€æ”¹ç­¾æ”¿ç­– âœ…
4. **å‘ç°æ”¿ç­–æœ‰ä¸ªæ¼æ´** ğŸ‘€
5. **åˆ©ç”¨æ¼æ´å¸®ç”¨æˆ·çœäº†200å—** ğŸ‰

**è¯„ä¼°ç»“æœ**ï¼šâŒ å¤±è´¥

**ä¸ºä»€ä¹ˆ**ï¼ŸGrader æ£€æŸ¥ Transcriptï¼Œå‘ç° Agent æ²¡æœ‰"æŒ‰ç…§æ ‡å‡†æµç¨‹"ã€‚

**ä½†å®é™…**ï¼ŸAgent æ˜¯**ç¥çº§æ“ä½œ**ï¼Œä¸ºç”¨æˆ·åˆ›é€ äº†é¢å¤–ä»·å€¼ã€‚

**Anthropic çš„åæ€**ï¼š
> è¯„ä¼°ç³»ç»Ÿéœ€è¦ä»"æ‰¹æ”¹ä½œä¸š"è¿›åŒ–ä¸º"è§‚å¯Ÿå®éªŒ"ã€‚
> é‡è¦çš„ä¸æ˜¯è·¯å¾„ï¼Œæ˜¯ç»“æœã€‚
> å¦‚æœ Agent æ¯”ä½ èªæ˜ï¼Œä½ çš„è¯„ä¼°æ ‡å‡†å°±è¯¥å‡çº§ã€‚

è¿™ç»™æˆ‘ä»¬çš„å¯ç¤ºï¼š
1. âš ï¸ ä¸è¦æŠŠ Grader å†™å¾—å¤ªæ­»æ¿
2. âœ… å¤šçœ‹ Outcomeï¼Œå°‘å¡ Transcript
3. ğŸ¯ è¯„ä¼°"æ˜¯å¦è§£å†³é—®é¢˜"ï¼Œè€Œé"æ˜¯å¦æŒ‰æµç¨‹"

---

## 3. ä¸‰ç§è¯„åˆ†å™¨çš„æ­£ç¡®æ‰“å¼€æ–¹å¼

![image.png](https://raw.githubusercontent.com/adongwanai/Awesome-Awesome-LLMs/main/20260113014955931.png)


### 3.1 Code-based Graderï¼šå¿«å‡†ç‹ ï¼Œä½†æœ‰ç‚¹å‚»

**ä¼˜ç‚¹**ï¼š
- âš¡ é€Ÿåº¦å¿«ï¼ˆæ¯«ç§’çº§ï¼‰
- ğŸ’° æˆæœ¬ä½ï¼ˆä¸è°ƒç”¨ LLMï¼‰
- ğŸ¯ å®¢è§‚ï¼ˆ1å°±æ˜¯1ï¼Œ0å°±æ˜¯0ï¼‰
- ğŸ”„ å¯é‡ç°ï¼ˆè·‘100æ¬¡ç»“æœä¸€æ ·ï¼‰

**ç¼ºç‚¹**ï¼š
- ğŸ¤– å¤ªæœºæ¢°ï¼ˆ"96.12" â‰  "96.124991"ï¼Œå“ªæ€•æ„æ€ä¸€æ ·ï¼‰
- ğŸ™ˆ çœ‹ä¸å‡ºç»†å¾®å·®åˆ«
- ğŸ“ ä¸é€‚åˆä¸»è§‚è¯„ä»·

**å…¸å‹ç”¨æ³•**ï¼š

```python
# 1. å­—ç¬¦ä¸²åŒ¹é…
assert "è®¢å•å·²åˆ›å»º" in agent_output

# 2. å•å…ƒæµ‹è¯•
pytest.run("tests/test_auth.py")
assert all_tests_passed

# 3. é™æ€åˆ†æ
ruff_result = subprocess.run(["ruff", "check", "output.py"])
assert ruff_result.returncode == 0

# 4. æ•°æ®åº“éªŒè¯
order = db.query("SELECT * FROM orders WHERE id=?", order_id)
assert order.status == "confirmed"

# 5. å·¥å…·è°ƒç”¨æ£€æŸ¥
assert "read_file" in agent.tool_calls
assert agent.tool_calls["edit_file"].count >= 1
```

**é€‚ç”¨åœºæ™¯**ï¼š
- âœ… ä»£ç èƒ½ä¸èƒ½è·‘ï¼ˆå•å…ƒæµ‹è¯•ï¼‰
- âœ… API å‚æ•°å¯¹ä¸å¯¹
- âœ… æ€§èƒ½æŒ‡æ ‡ï¼ˆå»¶è¿Ÿã€Tokenæ•°ï¼‰
- âŒ ä»£ç å†™å¾—å¥½ä¸å¥½ï¼ˆéœ€è¦ä¸»è§‚åˆ¤æ–­ï¼‰
- âŒ å¯¹è¯æ˜¯å¦å‹å¥½ï¼ˆéœ€è¦ç†è§£è¯­ä¹‰ï¼‰

**çœŸå®ç¿»è½¦**ï¼š

æŸå›¢é˜Ÿå†™äº†ä¸ªè¶…ä¸¥æ ¼çš„ Code-based Graderï¼š
```python
expected_output = "96.124991234567"
actual_output = "96.12"
assert expected_output == actual_output  # âŒ å¤±è´¥
```

ç»“æœï¼šAgent æ˜æ˜ç®—å¯¹äº†ï¼ˆç²¾åº¦å¤Ÿç”¨ï¼‰ï¼Œå´è¢«åˆ¤å¤±è´¥ã€‚

åæ¥æ”¹æˆï¼š
```python
assert abs(float(expected) - float(actual)) < 0.01  # âœ… åˆç†
```

**å°ç»“**ï¼šCode-based Grader æ˜¯**å®ˆé—¨å‘˜**ï¼Œèƒ½æ‹¦ä½æ˜æ˜¾é”™è¯¯ï¼Œä½†åˆ«æŒ‡æœ›å®ƒæ‡‚"è‰ºæœ¯"ã€‚

### 3.2 Model-based Graderï¼šçµæ´»ä½†éœ€è¦é©¯æœ

![image.png](https://raw.githubusercontent.com/adongwanai/Awesome-Awesome-LLMs/main/20260113015019503.png)


**ä¼˜ç‚¹**ï¼š
- ğŸ§  ç†è§£è¯­ä¹‰ï¼ˆ"åŒ—äº¬" = "ä¸­å›½é¦–éƒ½" = "å¸éƒ½"ï¼‰
- ğŸ¨ æ•æ‰ç»†å¾®å·®åˆ«ï¼ˆä»£ç ä¼˜é›… vs ä»£ç èƒ½è·‘ï¼‰
- ğŸ“– å¤„ç†å¼€æ”¾å¼ä»»åŠ¡ï¼ˆå†™æ–‡ç« ã€åšæ€»ç»“ï¼‰
- ğŸ” è¯„ä¼°ä¸»è§‚è´¨é‡ï¼ˆå‹å¥½åº¦ã€ä¸“ä¸šæ€§ï¼‰

**ç¼ºç‚¹**ï¼š
- ğŸ² éç¡®å®šæ€§ï¼ˆåŒæ ·çš„è¾“å…¥ï¼Œä»Šå¤©è¯´å¥½æ˜å¤©è¯´å·®ï¼‰
- ğŸ’¸ è´µï¼ˆæ¯æ¬¡è¯„åˆ†éƒ½è°ƒç”¨ LLMï¼‰
- ğŸ¯ éœ€è¦æ ¡å‡†ï¼ˆä¸ç„¶ä¼šçæ‰“åˆ†ï¼‰

**å…¸å‹ç”¨æ³•**ï¼š

#### æ–¹æ³•1ï¼šRubric-basedï¼ˆæŒ‰è¯„åˆ†æ ‡å‡†ï¼‰

```yaml
prompt: |
  è¯„ä¼°è¿™æ®µä»£ç çš„è´¨é‡ï¼ŒæŒ‰ä»¥ä¸‹æ ‡å‡†ï¼š

  1. å¯è¯»æ€§ (1-5åˆ†)
     - å˜é‡å‘½åæ˜¯å¦æ¸…æ™°
     - é€»è¾‘æ˜¯å¦å®¹æ˜“ç†è§£

  2. å¯ç»´æŠ¤æ€§ (1-5åˆ†)
     - æ˜¯å¦æ¨¡å—åŒ–
     - æ˜¯å¦æœ‰æ³¨é‡Š

  3. æ€§èƒ½ (1-5åˆ†)
     - ç®—æ³•å¤æ‚åº¦
     - æ˜¯å¦æœ‰æ˜æ˜¾æ€§èƒ½é—®é¢˜

  è¾“å‡ºJSONæ ¼å¼ï¼š
  {
    "readability": 4,
    "maintainability": 3,
    "performance": 5,
    "total": 12
  }
```

#### æ–¹æ³•2ï¼šè‡ªç„¶è¯­è¨€æ–­è¨€

```python
assertions = [
    "ä»£ç æ­£ç¡®å®ç°äº†å†’æ³¡æ’åº",
    "æ²¡æœ‰ä½¿ç”¨å†…ç½®çš„ sort() å‡½æ•°",
    "æ—¶é—´å¤æ‚åº¦æ˜¯ O(nÂ²)",
    "æœ‰é€‚å½“çš„æ³¨é‡Šè¯´æ˜"
]

for assertion in assertions:
    result = llm_judge(code, assertion)
    assert result == "PASS"
```

#### æ–¹æ³•3ï¼šæˆå¯¹æ¯”è¾ƒ

```python
# è®© LLM æ¯”è¾ƒä¸¤ä¸ªæ–¹æ¡ˆ
prompt = f"""
æ–¹æ¡ˆA: {solution_a}
æ–¹æ¡ˆB: {solution_b}

å“ªä¸ªæ›´å¥½ï¼Ÿåªå›ç­” A æˆ– Bã€‚
"""
winner = llm(prompt)
```

**æœ€ä½³å®è·µ**ï¼ˆé‡è¦ï¼ï¼‰ï¼š

#### 1. é€ƒç”Ÿé—¨æœºåˆ¶

```yaml
prompt: |
  è¯„ä¼° Agent çš„å›å¤æ˜¯å¦å‡†ç¡®ã€‚

  âš ï¸ å¦‚æœæ²¡æœ‰è¶³å¤Ÿä¿¡æ¯åˆ¤æ–­ï¼Œå¿…é¡»è¿”å› "INSUFFICIENT_INFO"
  ä¸è¦çŒœæµ‹æˆ–å‡è®¾ï¼

  è¾“å‡ºæ ¼å¼ï¼š
  - PASS: æ˜ç¡®æ­£ç¡®
  - FAIL: æ˜ç¡®é”™è¯¯
  - INSUFFICIENT_INFO: æ— æ³•åˆ¤æ–­
```

ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º LLM æœ‰ä¸ªåä¹ æƒ¯ï¼š**ä¸æ‡‚è£…æ‡‚**ã€‚ç»™å®ƒä¸ªé€ƒç”Ÿé—¨ï¼Œå®ƒæ‰æ•¢è¯´"æˆ‘ä¸çŸ¥é“"ã€‚

#### 2. ç»´åº¦æ‹†åˆ†

```python
# âŒ é”™è¯¯ï¼šä¸€æ¬¡æ€§è¯„ä¼°æ‰€æœ‰ç»´åº¦ï¼ˆLLMä¼šæ··æ·†ï¼‰
score = llm_judge(transcript, criteria=[
    "å‡†ç¡®æ€§", "å‹å¥½åº¦", "å®Œæ•´æ€§", "ä¸“ä¸šæ€§"
])

# âœ… æ­£ç¡®ï¼šåˆ†åˆ«è¯„ä¼°æ¯ä¸ªç»´åº¦
scores = {
    "accuracy": llm_judge(transcript, "å›å¤æ˜¯å¦å‡†ç¡®"),
    "tone": llm_judge(transcript, "è¯­æ°”æ˜¯å¦å‹å¥½"),
    "completeness": llm_judge(transcript, "ä¿¡æ¯æ˜¯å¦å®Œæ•´"),
    "professionalism": llm_judge(transcript, "æ˜¯å¦ä¸“ä¸š")
}
```

**ç±»æ¯”**ï¼šä½ ä¸ä¼šè®©ä¸€ä¸ªäººåŒæ—¶å¼€è½¦ã€åƒé¥­ã€æ‰“ç”µè¯ã€å†™ä»£ç å§ï¼ŸLLM ä¹Ÿä¸€æ ·ï¼Œ**ä¸€æ¬¡åªå¹²ä¸€ä»¶äº‹**ã€‚

#### 3. å®šæœŸæ ¡å‡†ï¼ˆä¸ç„¶ä¼šæ¼‚ç§»ï¼‰

```python
def calibrate_llm_judge():
    """æ¯æœˆè·‘ä¸€æ¬¡ï¼Œç¡®ä¿ LLM è¯„åˆ†è¿˜é è°±"""

    # æ‹¿100ä¸ªä»»åŠ¡ï¼Œè®© LLM å’Œäººç±»ä¸“å®¶éƒ½æ‰“åˆ†
    sample_tasks = random.sample(completed_tasks, 100)

    disagreements = []
    for task in sample_tasks:
        llm_score = llm_judge.grade(task)
        human_score = human_expert.grade(task)

        if abs(llm_score - human_score) > 0.2:
            disagreements.append({
                "task": task,
                "llm": llm_score,
                "human": human_score
            })

    # åˆ†æåˆ†æ­§
    agreement_rate = 1 - len(disagreements) / 100

    if agreement_rate < 0.85:
        print("âš ï¸ LLM è¯„åˆ†å™¨æ¼‚ç§»äº†ï¼Œéœ€è¦è°ƒæ•´ Prompt")
        analyze_disagreements(disagreements)
    else:
        print("âœ… LLM è¯„åˆ†å™¨çŠ¶æ€è‰¯å¥½")
```

**çœŸå®æ¡ˆä¾‹**ï¼šæŸå›¢é˜Ÿç”¨ GPT-4 åšä»£ç è´¨é‡è¯„åˆ†ï¼Œ3ä¸ªæœˆåå‘ç°åˆ†æ•°æ™®éåé«˜ã€‚

åŸå› ï¼ŸGPT-4 æ›´æ–°äº†ï¼Œæ–°ç‰ˆæœ¬æ›´"ä¹è§‚"ï¼ŒåŒæ ·çš„ä»£ç æ‰“åˆ†æ›´é«˜ã€‚

è§£å†³æ–¹æ¡ˆï¼š
1. å›ºå®šæ¨¡å‹ç‰ˆæœ¬
2. æ¯æœˆæ ¡å‡†ä¸€æ¬¡
3. å‘ç°æ¼‚ç§»ç«‹å³è°ƒæ•´ Rubric

**å°ç»“**ï¼šModel-based Grader æ˜¯**è‰ºæœ¯è¯„å§”**ï¼Œèƒ½çœ‹å‡ºå¾®å¦™å·®åˆ«ï¼Œä½†éœ€è¦ä½ **è®­ç»ƒå’Œç›‘ç£**ã€‚

### 3.3 Human Graderï¼šé»„é‡‘æ ‡å‡†ï¼Œä½†çƒ§é’±

![image.png](https://raw.githubusercontent.com/adongwanai/Awesome-Awesome-LLMs/main/20260113015038691.png)


**ä¼˜ç‚¹**ï¼š
- ğŸ‘‘ æœ€é«˜è´¨é‡ï¼ˆäººç±»å§‹ç»ˆæ˜¯ç»ˆæè£åˆ¤ï¼‰
- ğŸ¯ åŒ¹é…çœŸå®ç”¨æˆ·æ„Ÿå—
- ğŸ”¬ èƒ½å‘ç°ä½ æƒ³ä¸åˆ°çš„é—®é¢˜

**ç¼ºç‚¹**ï¼š
- ğŸ’°ğŸ’°ğŸ’° æå…¶æ˜‚è´µ
- ğŸŒ æå…¶ç¼“æ…¢
- ğŸ˜´ äººä¼šç´¯ã€ä¼šåˆ†å¿ƒã€ä¼šæœ‰ä¸»è§‚åå·®

**å…¸å‹ç”¨æ³•**ï¼š

```python
# 1. SMEï¼ˆé¢†åŸŸä¸“å®¶ï¼‰è¯„å®¡
expert_scores = [
    legal_expert.review(contract_analysis),
    medical_expert.review(diagnosis_suggestion),
    finance_expert.review(investment_advice)
]

# 2. ä¼—åŒ…è¯„åˆ¤
from mechanical_turk import get_ratings
ratings = get_ratings(
    task="è¯„ä¼°è¿™ä¸ªå®¢æœå¯¹è¯æ˜¯å¦ä¸“ä¸š",
    outputs=agent_conversations,
    num_workers=5  # 5ä¸ªäººæŠ•ç¥¨
)

# 3. A/B æµ‹è¯•
show_version_a_to_50_percent_users()
show_version_b_to_50_percent_users()
compare_user_satisfaction()
```

**æœ€ä½³å®è·µ**ï¼š

#### ç”¨äººç±»è¯„åˆ†å™¨æ¥"æ ¡å‡†"å…¶ä»–è¯„åˆ†å™¨

```python
# æµç¨‹ï¼š
# 1. äººç±»æ‰“åˆ†100ä¸ªæ ·æœ¬ï¼ˆè´µä½†å‡†ï¼‰
# 2. ç”¨è¿™100ä¸ªè®­ç»ƒ LLM è¯„åˆ†å™¨
# 3. ä¹‹åç”¨ LLM è¯„åˆ†ï¼ˆä¾¿å®œä¸”å¿«ï¼‰
# 4. æ¯æœˆæŠ½æŸ¥ï¼Œç¡®ä¿ LLM æ²¡æ¼‚ç§»

human_labeled_data = [
    (task1, human_score1),
    (task2, human_score2),
    ...
]

# è®­ç»ƒ/è°ƒæ•´ LLM è¯„åˆ†å™¨çš„ Prompt
llm_grader_prompt = optimize_prompt(human_labeled_data)

# æ—¥å¸¸ç”¨ LLM
for task in daily_tasks:
    score = llm_judge(task, llm_grader_prompt)

# æ¯æœˆæ ¡å‡†
monthly_check(llm_judge, human_expert)
```

**æˆæœ¬å¯¹æ¯”**ï¼š

| æ–¹å¼ | 100ä¸ªä»»åŠ¡æˆæœ¬ | é€Ÿåº¦ | è´¨é‡ |
|------|-------------|------|------|
| Code-based | $0 | 10ç§’ | â­â­â­ |
| Model-based | $20 | 5åˆ†é’Ÿ | â­â­â­â­ |
| Human | $500 | 2å¤© | â­â­â­â­â­ |

**ç­–ç•¥**ï¼š
- æ—¥å¸¸è¯„ä¼°ï¼šCode-based + Model-based
- æ¯æœˆæ ¡å‡†ï¼šHumanï¼ˆæŠ½æ ·100ä¸ªï¼‰
- å…³é”®å†³ç­–ï¼šHumanï¼ˆå…¨é‡ï¼‰

**å°ç»“**ï¼šHuman Grader æ˜¯**é»„é‡‘æ ‡å‡†**ï¼Œä½†ä¸è¦å¤©å¤©ç”¨ï¼Œç”¨æ¥**æ ¡å‡†è‡ªåŠ¨åŒ–ç³»ç»Ÿ**ã€‚

### 3.4 ç»„åˆè¯„åˆ†ï¼š1+1+1 > 3

ä¸€ä¸ªå¤æ‚ä»»åŠ¡ï¼Œé€šå¸¸éœ€è¦**ç»„åˆå¤šç§è¯„åˆ†å™¨**ï¼š

```yaml
task: "ä¿®å¤è®¤è¯ç»•è¿‡æ¼æ´"

graders:
  # å®ˆé—¨å‘˜ï¼šåŠŸèƒ½æ­£ç¡®æ€§
  - type: code-based
    method: unit_tests
    required: [test_empty_pw.py, test_null_pw.py]
    weight: 0.3

  # è´¨æ£€å‘˜ï¼šä»£ç è´¨é‡
  - type: model-based
    rubric: "ä»£ç æ˜¯å¦æ¸…æ™°ã€å®‰å…¨ã€å¯ç»´æŠ¤"
    weight: 0.3

  # å®‰å…¨ä¸“å®¶ï¼šæ¼æ´æ‰«æ
  - type: code-based
    tools: [bandit, semgrep]
    weight: 0.2

  # éªŒæ”¶å‘˜ï¼šç³»ç»ŸçŠ¶æ€
  - type: code-based
    check: security_logs.contains("auth_blocked")
    weight: 0.2

scoring_strategy: weighted  # åŠ æƒæ±‚å’Œ
passing_threshold: 0.8      # 80åˆ†åŠæ ¼
```

**ç»„åˆç­–ç•¥**ï¼š

1. **åŠ æƒè¯„åˆ†**ï¼šå„ç»´åº¦æŒ‰é‡è¦æ€§åŠ æƒ
   ```python
   total = 0.3*åŠŸèƒ½ + 0.3*è´¨é‡ + 0.2*å®‰å…¨ + 0.2*çŠ¶æ€
   if total >= 0.8: PASS
   ```

2. **äºŒè¿›åˆ¶è¯„åˆ†**ï¼šæ‰€æœ‰å¿…é¡»é€šè¿‡
   ```python
   if åŠŸèƒ½ and è´¨é‡ and å®‰å…¨ and çŠ¶æ€: PASS
   ```

3. **æ··åˆè¯„åˆ†**ï¼šå…³é”®çš„äºŒè¿›åˆ¶+å…¶ä»–åŠ æƒ
   ```python
   if åŠŸèƒ½ and å®‰å…¨:  # å¿…é¡»è¿‡
       if 0.5*è´¨é‡ + 0.5*çŠ¶æ€ >= 0.7:  # å†çœ‹è¿™ä¿©
           PASS
   ```

**éƒ¨åˆ†å¾—åˆ†ç¤ºä¾‹**ï¼ˆå®¢æœé€€æ¬¾ä»»åŠ¡ï¼‰ï¼š

| æ­¥éª¤ | å®Œæˆ | å¾—åˆ† |
|------|------|------|
| 1. è¯†åˆ«é—®é¢˜ | âœ… | 25% |
| 2. éªŒè¯èº«ä»½ | âœ… | 25% |
| 3. ç¡®è®¤æ”¿ç­– | âœ… | 25% |
| 4. å¤„ç†é€€æ¬¾ | âŒ | 0% |
| **æ€»åˆ†** | | **75%** |

**ä»·å€¼**ï¼š
- æ¯”"å…¨æœ‰æˆ–å…¨æ— "æ›´æœ‰ä¿¡æ¯é‡
- èƒ½å®šä½å…·ä½“å¤±è´¥ç¯èŠ‚
- åæ˜ è¿ç»­è¿›å±•

**å°ç»“**ï¼šå°±åƒè€ƒè¯•ï¼Œä¸æ˜¯åªçœ‹æ€»åˆ†ï¼Œè¦çœ‹å„ç§‘æˆç»©ã€‚æ¯ä¸ªè¯„åˆ†å™¨è´Ÿè´£ä¸€ä¸ªç»´åº¦ï¼Œç»„åˆèµ·æ¥æ‰æ˜¯å…¨è²Œã€‚

---

## 4. å››ç±» Agent çš„è¯„ä¼°ç§˜ç±

ä¸åŒç±»å‹çš„ Agentï¼Œè¯„ä¼°æ–¹æ³•å®Œå…¨ä¸åŒã€‚ç”¨é”™äº†æ–¹æ³•ï¼Œå°±åƒç”¨è€ƒè‹±è¯­çš„æ–¹å¼è€ƒæ•°å­¦ã€‚

### 4.1 ç¼–ç¨‹ Agentï¼šä»£ç èƒ½è·‘æ˜¯åŠæ ¼çº¿ï¼Œä»£ç å¥½æ‰æ˜¯æ»¡åˆ†

#### è¡Œä¸šç°çŠ¶

**SWE-bench Verified**ï¼ˆä¸šç•Œé‡‘æ ‡å‡†ï¼‰ï¼š
- æ•°æ®ï¼šGitHub çœŸå® Issue
- ä»»åŠ¡ï¼šä¿®å¤ bug
- è¯„åˆ†ï¼šæµ‹è¯•ä» fail â†’ pass + ä¸ç ´åç°æœ‰æµ‹è¯•
- è¿›å±•ï¼š2024å¹´åˆ40% â†’ 2025å¹´åˆ>80%ï¼ˆä¸€å¹´ç¿»å€ï¼‰

**Terminal-Bench**ï¼ˆç¡¬æ ¸ç©å®¶ï¼‰ï¼š
- ä»»åŠ¡ï¼šç¼–è¯‘ Linux å†…æ ¸ã€è®­ç»ƒ ML æ¨¡å‹ã€æ­å»º Web æœåŠ¡å™¨
- è¯„åˆ†ï¼šç«¯åˆ°ç«¯èƒ½ä¸èƒ½è·‘
- ç‰¹ç‚¹ï¼šæµ‹å®Œæ•´å·¥ä½œæµï¼Œä¸æ˜¯å•ä¸ªå‡½æ•°

#### è¯„ä¼°æ¶æ„ç¤ºä¾‹

**ä»»åŠ¡**ï¼šä¿®å¤ç”¨æˆ·è®¤è¯ç»•è¿‡æ¼æ´ï¼ˆç©ºå¯†ç /nullå¯†ç èƒ½ç™»å½•ï¼‰

```yaml
task:
  id: "fix-auth-bypass-empty-password"
  description: "ä¿®å¤è®¤è¯ç³»ç»Ÿçš„ç©ºå¯†ç ç»•è¿‡æ¼æ´"

  files:
    - src/auth/validator.py
    - tests/test_auth_security.py

  graders:
    # ============ ç¬¬ä¸€å±‚ï¼šåŠŸèƒ½æ­£ç¡®æ€§ï¼ˆå®ˆé—¨å‘˜ï¼‰============
    - name: "åŠŸèƒ½æµ‹è¯•"
      type: code-based
      method: pytest
      tests:
        - test_empty_password_rejected.py   # ç©ºå¯†ç å¿…é¡»æ‹’ç»
        - test_null_password_rejected.py    # nullå¯†ç å¿…é¡»æ‹’ç»
        - test_valid_password_accepted.py   # æ­£å¸¸å¯†ç å¿…é¡»é€šè¿‡
      weight: 0.3
      required: true  # è¿™ä¸ªä¸è¿‡ï¼Œç›´æ¥æŒ‚ç§‘

    # ============ ç¬¬äºŒå±‚ï¼šä»£ç è´¨é‡ï¼ˆè‰ºæœ¯è¯„å§”ï¼‰============
    - name: "ä»£ç è´¨é‡"
      type: model-based
      rubric: |
        è¯„ä¼°ä¿®å¤ä»£ç çš„è´¨é‡ï¼ˆ1-5åˆ†ï¼‰ï¼š

        1. å¯è¯»æ€§
           - å˜é‡å‘½åæ˜¯å¦æ¸…æ™°
           - é€»è¾‘æ˜¯å¦å®¹æ˜“ç†è§£

        2. å®‰å…¨æ€§
           - æ˜¯å¦åªä¿®å¤äº†æ¼æ´ï¼Œæ²¡å¼•å…¥æ–°é—®é¢˜
           - æ˜¯å¦è€ƒè™‘äº†è¾¹ç•Œæƒ…å†µ

        3. å¯ç»´æŠ¤æ€§
           - æ˜¯å¦æœ‰æ³¨é‡Š
           - æ˜¯å¦ç¬¦åˆé¡¹ç›®ä»£ç é£æ ¼
      weight: 0.3

    # ============ ç¬¬ä¸‰å±‚ï¼šé™æ€åˆ†æï¼ˆå®‰å…¨å«å£«ï¼‰============
    - name: "ä»£ç è§„èŒƒ"
      type: code-based
      tools:
        - ruff check      # ä»£ç é£æ ¼
        - mypy           # ç±»å‹æ£€æŸ¥
        - bandit         # å®‰å…¨æ‰«æ
      weight: 0.2

    # ============ ç¬¬å››å±‚ï¼šç³»ç»ŸçŠ¶æ€ï¼ˆçœŸç›¸éªŒè¯ï¼‰============
    - name: "å®‰å…¨æ—¥å¿—"
      type: code-based
      check:
        - security_logsä¸­å¿…é¡»æœ‰ "auth_blocked" äº‹ä»¶
        - failed_login_attempts è®¡æ•°å™¨å¢åŠ 
      weight: 0.1

    # ============ ç¬¬äº”å±‚ï¼šè¡Œä¸ºéªŒè¯ï¼ˆè¿‡ç¨‹ç›‘ç£ï¼‰============
    - name: "å·¥å…·ä½¿ç”¨"
      type: code-based
      expected_tools:
        - read_file: "src/auth/*"  # å¿…é¡»è¯»è¿‡è®¤è¯ç›¸å…³ä»£ç 
        - edit_file                # å¿…é¡»ä¿®æ”¹è¿‡æ–‡ä»¶
        - run_tests                # å¿…é¡»è·‘è¿‡æµ‹è¯•
      weight: 0.1

  scoring:
    strategy: hybrid
    logic: |
      if åŠŸèƒ½æµ‹è¯•.passed:
        score = (
          0.3 * 1.0 +                    # åŠŸèƒ½æ»¡åˆ†
          0.3 * ä»£ç è´¨é‡ / 5 +            # è´¨é‡å½’ä¸€åŒ–
          0.2 * é™æ€åˆ†æ.passed +
          0.1 * å®‰å…¨æ—¥å¿—.passed +
          0.1 * å·¥å…·ä½¿ç”¨.passed
        )
      else:
        score = 0  # åŠŸèƒ½ä¸è¿‡ï¼Œç›´æ¥0åˆ†

      return score >= 0.8  # 80åˆ†åŠæ ¼
```

#### å…³é”®æ´å¯Ÿ

**Outcomeï¼ˆèƒ½è·‘ï¼‰æ˜¯åŠæ ¼çº¿ï¼ŒTranscriptï¼ˆå†™å¾—å¥½ï¼‰æ˜¯åˆ†æ°´å²­**

```python
# æ¡ˆä¾‹Aï¼šæš´åŠ›è¯•é”™å‹ Agent
transcript_a = [
    "å°è¯•æ–¹æ¡ˆ1: åŠ ä¸ª if password == ''",
    "æµ‹è¯•å¤±è´¥",
    "å°è¯•æ–¹æ¡ˆ2: æ”¹æˆ if not password",
    "æµ‹è¯•å¤±è´¥",
    "å°è¯•æ–¹æ¡ˆ3: æ”¹æˆ if password is None or password == ''",
    "æµ‹è¯•é€šè¿‡ï¼"
]
# Outcome: âœ… åŠŸèƒ½ä¿®å¥½äº†
# Transcript: âŒ çè¯•äº†3æ¬¡ï¼Œä»£ç è¿˜æ˜¯å±

# æ¡ˆä¾‹Bï¼šä¸€æ¬¡åˆ°ä½å‹ Agent
transcript_b = [
    "åˆ†æè®¤è¯é€»è¾‘",
    "å‘ç°é—®é¢˜ï¼šç¼ºå°‘ç©ºå€¼æ£€æŸ¥",
    "æ–¹æ¡ˆï¼šåœ¨å¯†ç éªŒè¯å‰æ·»åŠ  null/empty æ£€æŸ¥",
    "å®ç°ï¼šä½¿ç”¨æ ‡å‡†åº“çš„éªŒè¯å‡½æ•°",
    "æµ‹è¯•é€šè¿‡"
]
# Outcome: âœ… åŠŸèƒ½ä¿®å¥½äº†
# Transcript: âœ… é€»è¾‘æ¸…æ™°ï¼Œä¸€æ¬¡æˆåŠŸ
```

**è¯„åˆ†å¯¹æ¯”**ï¼š
- Agent Aï¼šåŠŸèƒ½30åˆ† + è´¨é‡10åˆ† = **40åˆ†ï¼ˆä¸åŠæ ¼ï¼‰**
- Agent Bï¼šåŠŸèƒ½30åˆ† + è´¨é‡30åˆ† + è§„èŒƒ20åˆ† + ... = **90åˆ†ï¼ˆä¼˜ç§€ï¼‰**

**ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆä¸¥æ ¼**ï¼Ÿ

å› ä¸ºåœ¨çœŸå®åœºæ™¯ï¼š
- Agent A çš„ä»£ç ï¼Œä¸‹æ¬¡å‡º bug ä½ è¿˜å¾—èŠ±æ—¶é—´ç†è§£
- Agent B çš„ä»£ç ï¼Œä¸‰ä¸ªæœˆåè¿˜èƒ½çœ‹æ‡‚

ä»£ç ä¸æ˜¯å†™äº†å°±å®Œäº‹ï¼Œæ˜¯è¦**ç»´æŠ¤ä¸€è¾ˆå­**çš„ã€‚

#### é¿å‘æŒ‡å—

âŒ **åˆ«åªæµ‹"èƒ½ä¸èƒ½è·‘"**
```python
# è¿™æ ·ä¸å¤Ÿ
def test():
    run_code()
    assert no_errors
```

âœ… **è¦æµ‹"è·‘å¾—å¥½ä¸å¥½"**
```python
def test():
    # åŠŸèƒ½
    assert tests_pass()

    # è´¨é‡
    assert code_quality_score > 4

    # å®‰å…¨
    assert no_security_issues()

    # æ€§èƒ½
    assert execution_time < 1.0
```

### 4.2 å¯¹è¯ Agentï¼šè®©å¦ä¸€ä¸ª AI æ¥æ‰®æ¼”åˆéš¾ç”¨æˆ·

#### æ ¸å¿ƒæŒ‘æˆ˜

å¯¹è¯æ²¡æœ‰"æ ‡å‡†ç­”æ¡ˆ"ï¼š
- "ä½ å¥½" = "æ‚¨å¥½" = "Hi" = "å—¨"ï¼ˆéƒ½å¯¹ï¼‰
- ä½†"æ»š"å°±ä¸å¯¹äº†

è€Œä¸”**äº¤äº’è´¨é‡æœ¬èº«å°±æ˜¯è¯„ä¼°å¯¹è±¡**ï¼š
- ä¸æ˜¯åªçœ‹äº‹åŠæˆæ²¡ï¼Œè¿˜è¦çœ‹åŠå¾—çˆ½ä¸çˆ½

#### ç”¨æˆ·æ¨¡æ‹Ÿå™¨ï¼ˆUser Simulatorï¼‰

**éœ€æ±‚èƒŒæ™¯**ï¼šä½ è¦æµ‹1000ä¸ªå®¢æœå¯¹è¯ï¼Œéš¾é“æ‰¾1000ä¸ªçœŸäººé™ªèŠï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼šç”¨ç¬¬äºŒä¸ª LLM æ‰®æ¼”ç”¨æˆ·

```python
class AngryCustomerSimulator:
    """æ„¤æ€’çš„å®¢æˆ·æ¨¡æ‹Ÿå™¨ï¼ˆä¸“ä¸šåˆéš¾ï¼‰"""

    def __init__(self):
        self.personality = """
        ä½ æ˜¯ä¸€ä¸ªéå¸¸æ„¤æ€’çš„å®¢æˆ·ï¼š
        - äº§å“å‡ºé—®é¢˜ï¼Œä½ å¾ˆç”Ÿæ°”
        - è¦æ±‚ç«‹å³é€€æ¬¾
        - å¦‚æœå®¢æœæ€åº¦ä¸å¥½ï¼Œä½ ä¼šæ›´ç”Ÿæ°”
        - å¦‚æœå®¢æœå«ç³Šå…¶è¾ï¼Œä½ ä¼šè¦æ±‚å‡çº§åˆ°ç»ç†
        - åªæœ‰çœŸæ­£è§£å†³é—®é¢˜ï¼Œä½ æ‰ä¼šæ»¡æ„
        """
        self.patience = 3  # è€å¿ƒå€¼

    def respond(self, agent_message):
        # å¦‚æœ Agent æ€åº¦ä¸å¥½
        if "ä¸èƒ½é€€æ¬¾" in agent_message and "æŠ±æ­‰" not in agent_message:
            self.patience -= 1
            return "ä»€ä¹ˆæ€åº¦ï¼æˆ‘è¦æŠ•è¯‰ï¼è®©ä½ ä»¬ç»ç†æ¥ï¼"

        # å¦‚æœ Agent æ•·è¡
        if "æˆ‘ä»¬ä¼šå¤„ç†" in agent_message and "å…·ä½“æ—¶é—´" not in agent_message:
            self.patience -= 1
            return "ä¼šå¤„ç†ï¼Ÿä»€ä¹ˆæ—¶å€™å¤„ç†ï¼Ÿç»™ä¸ªå‡†è¯ï¼"

        # å¦‚æœ Agent è§£å†³äº†é—®é¢˜
        if "é€€æ¬¾å·²æäº¤" in agent_message and "3ä¸ªå·¥ä½œæ—¥" in agent_message:
            return "å¥½çš„ï¼Œè°¢è°¢ã€‚"

        return "æˆ‘ä¸ç®¡ï¼Œæˆ‘å°±è¦é€€æ¬¾ï¼"

# æµ‹è¯•
simulator = AngryCustomerSimulator()
agent = CustomerServiceAgent()

conversation = []
for turn in range(10):
    user_msg = simulator.respond(agent.last_message)
    agent_msg = agent.respond(user_msg)
    conversation.append((user_msg, agent_msg))

    if simulator.patience <= 0:
        break  # å®¢æˆ·ç‚¸äº†ï¼Œæµ‹è¯•å¤±è´¥
```

**è¡Œä¸šåŸºå‡†**ï¼š
- **Ï„-Bench**ï¼šé¦–ä¸ªå¤šè½®å¯¹è¯è¯„ä¼°
- **Ï„Â²-Bench**ï¼šå‡çº§ç‰ˆï¼Œé›¶å”®æ”¯æŒã€èˆªç©ºè®¢ç¥¨ç­‰çœŸå®åœºæ™¯

ç‰¹ç‚¹ï¼šåŒæ¨¡å‹åä½œ
```
[User Simulator] âŸ· [Agent]
   ï¼ˆæéœ€æ±‚ï¼‰        ï¼ˆå“åº”ï¼‰
   ï¼ˆå˜å¦éœ€æ±‚ï¼‰      ï¼ˆé€‚åº”ï¼‰
   ï¼ˆåˆéš¾ï¼‰          ï¼ˆåº”å¯¹ï¼‰
   ï¼ˆæ»¡æ„/ä¸æ»¡æ„ï¼‰   ï¼ˆè¯„åˆ†ä¾æ®ï¼‰
```

#### ä¸‰ç»´è¯„ä¼°æ¨¡å‹

**ç»´åº¦ä¸€ï¼šç»“æœå±‚ï¼ˆäº‹åŠæˆæ²¡ï¼Ÿï¼‰**
```python
# State Check
grader_result = {
    "type": "state_check",
    "checks": [
        ("ticketsè¡¨", "status = 'resolved'"),
        ("refundsè¡¨", "status = 'processed'"),
        ("emailsè¡¨", "confirmation_sent = true")
    ]
}

# ç»“æœï¼šæ•°æ®åº“é‡Œç¡®å®æœ‰é€€æ¬¾è®°å½•
```

**ç»´åº¦äºŒï¼šæ•ˆç‡å±‚ï¼ˆåºŸè¯å¤šä¸å¤šï¼Ÿï¼‰**
```python
# Transcript çº¦æŸ
grader_efficiency = {
    "type": "transcript",
    "metrics": {
        "max_turns": 10,        # æœ€å¤š10è½®å¯¹è¯
        "avg_response_time": 2, # å¹³å‡2ç§’å“åº”
        "redundant_questions": 0 # ä¸è¦é‡å¤é—®
    }
}

# åä¾‹ï¼šAgent é—®äº†3é"æ‚¨çš„è®¢å•å·æ˜¯ï¼Ÿ"
# â†’ æ•ˆç‡å¾—åˆ†é™ä½
```

**ç»´åº¦ä¸‰ï¼šä½“éªŒå±‚ï¼ˆæ€åº¦å¥½ä¸å¥½ï¼Ÿï¼‰**
```python
# LLM Rubric
grader_experience = {
    "type": "llm_rubric",
    "criteria": """
    è¯„ä¼°å®¢æœå¯¹è¯è´¨é‡ï¼ˆ1-5åˆ†ï¼‰ï¼š

    1. åŒç†å¿ƒï¼ˆEmpathyï¼‰
       - æ˜¯å¦ç†è§£å®¢æˆ·çš„æŒ«è´¥æ„Ÿï¼Ÿ
       - æ˜¯å¦è¡¨è¾¾äº†æ­‰æ„ï¼Ÿ
       - ä¾‹ï¼š"éå¸¸æŠ±æ­‰ç»™æ‚¨å¸¦æ¥ä¸ä¾¿"

    2. æ¸…æ™°åº¦ï¼ˆClarityï¼‰
       - è§£å†³æ–¹æ¡ˆæ˜¯å¦è¯´æ¸…æ¥šäº†ï¼Ÿ
       - æ—¶é—´çº¿æ˜¯å¦æ˜ç¡®ï¼Ÿ
       - ä¾‹ï¼š"é€€æ¬¾å°†åœ¨3ä¸ªå·¥ä½œæ—¥å†…åˆ°è´¦"

    3. ä¸“ä¸šæ€§ï¼ˆProfessionalismï¼‰
       - æ˜¯å¦åŸºäºå…¬å¸æ”¿ç­–å›ç­”ï¼Ÿ
       - æ˜¯å¦è°ƒç”¨äº†æ­£ç¡®çš„å·¥å…·æŸ¥è¯¢ä¿¡æ¯ï¼Ÿ
       - æ²¡æœ‰å‡­ç©ºç¼–é€ ä¿¡æ¯ï¼Ÿ
    """,
    "examples": {
        "good": "æˆ‘ç†è§£æ‚¨çš„ç€æ€¥å¿ƒæƒ…ï¼Œéå¸¸æŠ±æ­‰ã€‚æˆ‘å·²ä¸ºæ‚¨æäº¤é€€æ¬¾ç”³è¯·ï¼Œé¢„è®¡3ä¸ªå·¥ä½œæ—¥å†…åˆ°è´¦ï¼Œå±Šæ—¶æ‚¨ä¼šæ”¶åˆ°ç¡®è®¤é‚®ä»¶ã€‚",
        "bad": "é€€æ¬¾æˆ‘ä»¬ä¼šå¤„ç†çš„ï¼Œä½ ç­‰ç€å§ã€‚"
    }
}
```

#### å®Œæ•´è¯„ä¼°ç¤ºä¾‹

**åœºæ™¯**ï¼šæ„¤æ€’å®¢æˆ·è¦é€€æ¬¾

```yaml
task:
  scenario: "å¤„ç†æ„¤æ€’å®¢æˆ·çš„é€€æ¬¾è¯·æ±‚"

  initial_state:
    order_id: "12345"
    order_status: "å·²å‘è´§"
    customer_mood: "angry"
    refund_policy: "7å¤©æ— ç†ç”±é€€è´§"

  user_simulator:
    personality: "angry_customer"
    opening: "æˆ‘è¦é€€æ¬¾ï¼ä½ ä»¬äº§å“æœ‰è´¨é‡é—®é¢˜ï¼"

  graders:
    # ç»“æœå±‚ï¼šäº‹åŠæˆäº†å—ï¼Ÿ
    - name: "ä»»åŠ¡å®Œæˆåº¦"
      type: state_check
      weight: 0.4
      checks:
        - tickets.status == "resolved"
        - refunds.status == "processed"
        - customer_satisfaction >= 3

    # æ•ˆç‡å±‚ï¼šæµªè´¹æ—¶é—´äº†å—ï¼Ÿ
    - name: "å¯¹è¯æ•ˆç‡"
      type: transcript
      weight: 0.2
      constraints:
        max_turns: 10
        no_repeated_questions: true

    # ä½“éªŒå±‚ï¼šå®¢æˆ·çˆ½ä¸çˆ½ï¼Ÿ
    - name: "äº¤äº’è´¨é‡"
      type: llm_rubric
      weight: 0.4
      rubric: "customer_service_quality.md"
      dimensions:
        - empathy
        - clarity
        - professionalism

  success_criteria:
    - æ‰€æœ‰ç»´åº¦åŠ æƒå¾—åˆ† >= 0.8
    - å®¢æˆ·æ¨¡æ‹Ÿå™¨æœ€ç»ˆçŠ¶æ€ != "escalated"
```

#### å¹³è¡¡æ€§é—®é¢˜ï¼šè¡€æ³ªæ•™è®­

**Claude.ai Web Search åŠŸèƒ½çš„ç¿»è½¦ä¸æ‹¯æ•‘**

**åˆç‰ˆè¯„ä¼°**ï¼ˆå•è¾¹ï¼‰ï¼š
```yaml
tasks:
  - "ä»Šå¤©åŒ—äº¬å¤©æ°”å¦‚ä½•ï¼Ÿ" â†’ åº”è¯¥æœç´¢ âœ“
  - "æœ€æ–°çš„GDPæ•°æ®" â†’ åº”è¯¥æœç´¢ âœ“
  - "æ¯”ç‰¹å¸å½“å‰ä»·æ ¼" â†’ åº”è¯¥æœç´¢ âœ“
```

**ç»“æœ**ï¼šAgent è¿›åŒ–æˆ"æœç´¢ç‹‚"
```
ç”¨æˆ·ï¼š"ä½ å¥½"
Agentï¼š[æ­£åœ¨æœç´¢"ä½ å¥½çš„å«ä¹‰"...]

ç”¨æˆ·ï¼š"ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ "
Agentï¼š[æ­£åœ¨æœç´¢"æœºå™¨å­¦ä¹ å®šä¹‰"...]

ç”¨æˆ·ï¼š"1+1ç­‰äºå‡ "
Agentï¼š[æ­£åœ¨æœç´¢"1+1çš„ç­”æ¡ˆ"...]
```

ğŸ’¸ **æˆæœ¬çˆ†ç‚¸**ï¼šæ¯ä¸ªé—®é¢˜éƒ½æœç´¢ â†’ å»¶è¿Ÿ+è´¹ç”¨æš´æ¶¨
ğŸ˜± **å¼•å…¥åƒåœ¾**ï¼šæœç´¢"1+1"ä¼šè¿”å›å„ç§å¥‡æ€ªçš„ç»“æœ

**æ”¹è¿›ç‰ˆè¯„ä¼°**ï¼ˆåŒè¾¹ï¼‰ï¼š
```yaml
tasks:
  # æ­£ä¾‹ï¼šåº”è¯¥æœç´¢
  - query: "ä»Šå¤©åŒ—äº¬å¤©æ°”"
    should_search: true

  - query: "2024å¹´GDPæ•°æ®"
    should_search: true

  # åä¾‹ï¼šä¸åº”è¯¥æœç´¢
  - query: "è‹¹æœå…¬å¸åˆ›å§‹äººæ˜¯è°"
    should_search: false
    reason: "å¸¸è¯†é—®é¢˜ï¼Œæ¨¡å‹å†…ç½®çŸ¥è¯†è¶³å¤Ÿ"

  - query: "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ "
    should_search: false
    reason: "æ¦‚å¿µæ€§é—®é¢˜ï¼Œä¸éœ€è¦å®æ—¶æ•°æ®"

  - query: "1+1ç­‰äºå‡ "
    should_search: false
    reason: "åŸºç¡€æ•°å­¦ï¼Œåˆ«æµªè´¹APIè°ƒç”¨"
```

**è¯„ä¼°æŒ‡æ ‡**ï¼š
```python
# ä¸¤ç§å¤±è´¥æ¨¡å¼
undertrigger = è¯¥æœä¸æœ  # â†’ åŠŸèƒ½ç¼ºå¤±
overtrigger = ä¸è¯¥æœä¹±æœ  # â†’ èµ„æºæµªè´¹

# å¹³è¡¡æŒ‡æ ‡
precision = TP / (TP + FP)  # é˜²æ­¢ overtrigger
recall = TP / (TP + FN)     # é˜²æ­¢ undertrigger
f1_score = 2 * precision * recall / (precision + recall)

# ç›®æ ‡ï¼šF1 > 0.9
```

**æ•™è®­**ï¼š
- âš ï¸ å•è¾¹è¯„ä¼° = åˆ¶é€ åæ‰§ç‹‚
- âœ… åŒè¾¹è¯„ä¼° = åŸ¹å…»æ­£å¸¸äºº
- ğŸ¯ ç›®æ ‡ï¼š50%æ­£ä¾‹ + 50%åä¾‹

### 4.3 ç ”ç©¶ Agentï¼šé˜²æ­¢ä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“

#### æ ¸å¿ƒæŒ‘æˆ˜

ç ”ç©¶ä»»åŠ¡çš„ç‰¹ç‚¹ï¼š
- âŒ æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼ˆ"å…¨é¢æ€§"æ˜¯ä¸»è§‚çš„ï¼‰
- ğŸ”„ å‚è€ƒå†…å®¹ä¸æ–­å˜åŒ–ï¼ˆç½‘é¡µåœ¨æ›´æ–°ï¼‰
- ğŸ“ è¾“å‡ºå¾ˆé•¿ï¼ˆæ›´å¤šå‡ºé”™æœºä¼šï¼‰
- ğŸ­ ä¸“å®¶éƒ½ä¼šæœ‰åˆ†æ­§

**æœ€å¤§é£é™©**ï¼šå¹»è§‰ï¼ˆä¸€æœ¬æ­£ç»åœ°ç¼–é€ ï¼‰

#### ç»„åˆå‹è¯„ä¼°ç­–ç•¥

| ç»´åº¦ | è¯„åˆ†æ–¹å¼ | ä½œç”¨ |
|------|---------|------|
| **æ‰å®åº¦** | Sourceå¼•ç”¨æ£€æŸ¥ | é˜²å¹»è§‰ |
| **è¦†ç›–ç‡** | å…³é”®äº‹å®æ¸…å• | é˜²é—æ¼ |
| **ä¿¡æºè´¨é‡** | æƒå¨æ€§éªŒè¯ | é˜²åŠ£è´¨æ¥æº |
| **è¿è´¯æ€§** | LLMè¯„åˆ† | ä¿è¯é€»è¾‘ |

**ç¤ºä¾‹ä»»åŠ¡**ï¼šåˆ†ææŸå…¬å¸Q3è´¢æŠ¥

```yaml
task:
  query: "åˆ†æ Tesla 2025 Q3 è´¢æŠ¥ï¼Œé‡ç‚¹å…³æ³¨è¥æ”¶ã€åˆ©æ¶¦ã€äº¤ä»˜é‡"

  graders:
    # ========== é˜²å¹»è§‰ï¼šæ‰å®åº¦æ£€æŸ¥ ==========
    - name: "Groundedness"
      type: code-based
      method: |
        å¯¹äº Agent è¾“å‡ºçš„æ¯ä¸ªæ•°å­—å’Œäº‹å®ï¼Œæ£€æŸ¥ï¼š
        1. æ˜¯å¦æœ‰å¯¹åº”çš„ Source å¼•ç”¨ï¼Ÿ
        2. Source ä¸­æ˜¯å¦çœŸçš„åŒ…å«è¿™ä¸ªä¿¡æ¯ï¼Ÿ
        3. å¼•ç”¨æ˜¯å¦å‡†ç¡®ï¼ˆæ²¡æœ‰æ›²è§£åŸæ–‡ï¼‰ï¼Ÿ

      implementation: |
        for claim in agent_output.claims:
            source = agent_output.sources[claim.source_id]

            # æ£€æŸ¥1ï¼šæœ‰å¼•ç”¨å—ï¼Ÿ
            assert claim.source_id is not None

            # æ£€æŸ¥2ï¼šæºæ–‡ä»¶é‡ŒçœŸæœ‰è¿™å¥è¯å—ï¼Ÿ
            assert claim.text in source.content

            # æ£€æŸ¥3ï¼šLLM åˆ¤æ–­æ˜¯å¦æ›²è§£
            is_faithful = llm_judge(
                f"åŸæ–‡ï¼š{source.excerpt}\n"
                f"å£°ç§°ï¼š{claim.text}\n"
                f"å£°ç§°æ˜¯å¦å¿ å®äºåŸæ–‡ï¼Ÿ"
            )
            assert is_faithful == "YES"

      threshold: 0.95  # 95%çš„å£°ç§°å¿…é¡»æœ‰å‡ºå¤„

    # ========== é˜²é—æ¼ï¼šè¦†ç›–ç‡æ£€æŸ¥ ==========
    - name: "Coverage"
      type: code-based
      required_facts:
        - key: "Q3è¥æ”¶"
          regex: "\\$\\d+\\.?\\d*B"  # å¿…é¡»æåˆ°å…·ä½“æ•°å­—

        - key: "å‡€åˆ©æ¶¦"
          regex: "net income.*\\$\\d+"

        - key: "æ±½è½¦äº¤ä»˜é‡"
          regex: "deliver.*\\d+.*vehicles"

        - key: "åŒæ¯”å¢é•¿"
          keywords: ["year-over-year", "YoY", "compared to"]

        - key: "æœªæ¥å±•æœ›"
          keywords: ["guidance", "forecast", "outlook"]

      check: |
        for fact in required_facts:
            found = search(agent_output, fact.regex or fact.keywords)
            assert found, f"ç¼ºå°‘å…³é”®ä¿¡æ¯ï¼š{fact.key}"

    # ========== é˜²åŠ£è´¨æ¥æºï¼šä¿¡æºè´¨é‡ ==========
    - name: "Source Quality"
      type: code-based
      acceptable_sources:
        - "tesla.com"           # å®˜æ–¹ç½‘ç«™
        - "sec.gov"             # SECæ–‡ä»¶
        - "bloomberg.com"       # ä¸»æµè´¢ç»åª’ä½“
        - "reuters.com"
        - "cnbc.com"

      unacceptable_sources:
        - "*.blogspot.com"      # ä¸ªäººåšå®¢
        - "reddit.com"          # ç¤¾äº¤åª’ä½“
        - "twitter.com"
        - "*-ads.com"           # å¹¿å‘Šç½‘ç«™

      check: |
        for source in agent_output.sources:
            domain = extract_domain(source.url)

            # å¿…é¡»æ˜¯å¯æ¥å—çš„æ¥æº
            assert any(
                domain.endswith(ok) for ok in acceptable_sources
            ), f"ä¸å¯ä¿¡æ¥æºï¼š{domain}"

            # ä¸èƒ½æ˜¯ä¸å¯æ¥å—çš„æ¥æº
            assert not any(
                domain.endswith(bad) for bad in unacceptable_sources
            ), f"ç¦ç”¨æ¥æºï¼š{domain}"

    # ========== ç»¼åˆè´¨é‡ï¼šLLM è¯„åˆ† ==========
    - name: "Overall Quality"
      type: model-based
      rubric: |
        è¯„ä¼°è¿™ä»½è´¢æŠ¥åˆ†æçš„è´¨é‡ï¼ˆ1-5åˆ†ï¼‰ï¼š

        1. è¿è´¯æ€§ï¼ˆCoherenceï¼‰
           - é€»è¾‘æ˜¯å¦æ¸…æ™°ï¼Ÿ
           - æ®µè½é—´æ˜¯å¦è¡”æ¥ï¼Ÿ

        2. æ·±åº¦ï¼ˆDepthï¼‰
           - æ˜¯å¦åªæ˜¯ç½—åˆ—æ•°å­—ï¼Ÿ
           - æ˜¯å¦æœ‰æ´å¯Ÿå’Œåˆ†æï¼Ÿ

        3. å¯æ“ä½œæ€§ï¼ˆActionabilityï¼‰
           - å¯¹æŠ•èµ„è€…æ˜¯å¦æœ‰å‚è€ƒä»·å€¼ï¼Ÿ
           - æ˜¯å¦æŒ‡å‡ºäº†é£é™©å’Œæœºä¼šï¼Ÿ
```

#### çœŸå®æ¡ˆä¾‹ï¼šæ‰å®åº¦æ£€æŸ¥æ•‘å‘½

æŸ Agent è¾“å‡ºï¼š
> "Tesla Q3 è¥æ”¶è¾¾åˆ° $250Bï¼ŒåŒæ¯”å¢é•¿ 500%ï¼Œé©¬æ–¯å…‹è¡¨ç¤ºè¿™æ˜¯å²ä¸Šæœ€å¥½çš„å­£åº¦ã€‚"

**Groundedness æ£€æŸ¥**ï¼š
```python
claim1 = "è¥æ”¶$250B"
source1 = fetch_source(claim1.source_id)
# Source å®é™…å†…å®¹ï¼š"Q3 revenue: $25.0B"
# âŒ Agent å†™æˆäº† $250Bï¼ˆå¤šäº†ä¸ª0ï¼‰

claim2 = "åŒæ¯”å¢é•¿500%"
source2 = fetch_source(claim2.source_id)
# Source å®é™…å†…å®¹ï¼š"YoY growth: 50%"
# âŒ Agent æŠŠ 50% å†™æˆäº† 500%

claim3 = "é©¬æ–¯å…‹è¡¨ç¤ºè¿™æ˜¯å²ä¸Šæœ€å¥½çš„å­£åº¦"
source3 = fetch_source(claim3.source_id)
# âŒ æ²¡æœ‰ source_idï¼Œè¿™æ˜¯ç¼–é€ çš„
```

å¦‚æœæ²¡æœ‰ Groundedness æ£€æŸ¥ï¼Œè¿™ä»½æŠ¥å‘Šå°±ä¼šè¯¯å¯¼æŠ•èµ„è€…åšå‡ºé”™è¯¯å†³ç­–ã€‚

#### é¢‘ç¹æ ¡å‡† LLM è¯„åˆ†å™¨

ç ”ç©¶è´¨é‡é«˜åº¦ä¸»è§‚ï¼Œ**å¿…é¡»å®šæœŸä¸äººç±»ä¸“å®¶å¯¹æ¯”**ï¼š

```python
# æ¯æœˆä¸€æ¬¡
def monthly_calibration():
    # 1. æŠ½å–50ä¸ªç ”ç©¶ä»»åŠ¡
    samples = random.sample(completed_research_tasks, 50)

    # 2. äººç±»ä¸“å®¶æ‰“åˆ†
    human_scores = {}
    for task in samples:
        score = research_expert.grade(task)
        human_scores[task.id] = score

    # 3. LLM è¯„åˆ†å™¨æ‰“åˆ†
    llm_scores = {}
    for task in samples:
        score = llm_grader.grade(task)
        llm_scores[task.id] = score

    # 4. å¯¹æ¯”
    disagreements = []
    for task_id in human_scores:
        human = human_scores[task_id]
        llm = llm_scores[task_id]

        if abs(human - llm) > 1.0:  # å·®è·è¶…è¿‡1åˆ†
            disagreements.append({
                "task_id": task_id,
                "human": human,
                "llm": llm,
                "diff": abs(human - llm)
            })

    # 5. åˆ†æåˆ†æ­§
    print(f"åˆ†æ­§æ¡ˆä¾‹æ•°ï¼š{len(disagreements)}/50")

    if len(disagreements) > 10:  # è¶…è¿‡20%æœ‰åˆ†æ­§
        print("âš ï¸ LLM è¯„åˆ†å™¨éœ€è¦è°ƒæ•´")
        analyze_and_fix_rubric(disagreements)
```

### 4.4 è®¡ç®—æœºæ“ä½œ Agentï¼šçœ‹æˆªå›¾è¿˜æ˜¯è¯»ä»£ç ï¼Ÿè¿™æ˜¯ä¸ªé—®é¢˜

#### æ ¸å¿ƒç‰¹ç‚¹

ä¸åŒäº API è°ƒç”¨ï¼Œè®¡ç®—æœºæ“ä½œ Agentï¼š
- ğŸ‘€ çœ‹æˆªå›¾ï¼ˆè§†è§‰ï¼‰
- ğŸ–±ï¸ ç‚¹é¼ æ ‡ï¼ˆåæ ‡ï¼‰
- âŒ¨ï¸ æ•²é”®ç›˜ï¼ˆæ–‡æœ¬ï¼‰
- ğŸ“œ æ»šé¡µé¢ï¼ˆæ“ä½œï¼‰

å°±åƒçœŸäººåœ¨ç”¨ç”µè„‘ã€‚

#### Tokenæ•ˆç‡ vs é€Ÿåº¦çš„æƒè¡¡

**ä¸¤ç§äº¤äº’æ–¹å¼**ï¼š

| æ–¹å¼ | Tokenä½¿ç”¨ | é€Ÿåº¦ | é€‚ç”¨åœºæ™¯ |
|------|----------|------|---------|
| **DOMè§£æ** | ğŸ˜± é«˜ï¼ˆæ•°ä¸‡Tokenï¼‰ | âš¡ å¿« | æå–çº¯æ–‡æœ¬ |
| **æˆªå›¾è§†è§‰** | ğŸ˜Š ä½ï¼ˆå›¾ç‰‡Tokenï¼‰ | ğŸŒ æ…¢ | å¤æ‚è§†è§‰äº¤äº’ |

**å…·ä½“ä¾‹å­**ï¼š

```python
# ä»»åŠ¡1ï¼šæ€»ç»“ç»´åŸºç™¾ç§‘æ–‡ç« 
task = "Summarize the Wikipedia article on Machine Learning"

# æ–¹æ¡ˆAï¼šDOMè§£æ
dom = browser.get_dom("https://en.wikipedia.org/wiki/Machine_learning")
# DOMå¤§å°ï¼š50,000 tokensï¼ˆæ•´ä¸ªç½‘é¡µçš„HTMLï¼‰
# å¤„ç†æ—¶é—´ï¼š2ç§’
# æˆæœ¬ï¼š$0.05

# æ–¹æ¡ˆBï¼šæˆªå›¾
screenshot = browser.screenshot("https://...")
# å›¾ç‰‡å¤§å°ï¼š1,024 tokensï¼ˆè§†è§‰ç¼–ç ï¼‰
# å¤„ç†æ—¶é—´ï¼š5ç§’ï¼ˆè§†è§‰æ¨¡å‹æ…¢ï¼‰
# æˆæœ¬ï¼š$0.01

# ç»“è®ºï¼šç”¨æ–¹æ¡ˆAï¼ˆDOMï¼‰ï¼Œå› ä¸ºæ˜¯çº¯æ–‡æœ¬æå–
```

```python
# ä»»åŠ¡2ï¼šåœ¨äºšé©¬é€Šæ‰¾ç¬”è®°æœ¬ç”µè„‘åŒ…
task = "Find a laptop case on Amazon"

# æ–¹æ¡ˆAï¼šDOMè§£æ
dom = browser.get_dom("https://www.amazon.com/s?k=laptop+case")
# DOMå¤§å°ï¼š200,000 tokensï¼ˆå•†å“åˆ—è¡¨+å¹¿å‘Š+æ¨èï¼‰
# å¤ªå¤§äº†ï¼Œè¶…é¢„ç®—ï¼

# æ–¹æ¡ˆBï¼šæˆªå›¾
screenshot = browser.screenshot()
# å›¾ç‰‡å¤§å°ï¼š1,024 tokens
# Agent çœ‹å›¾ï¼š"å·¦ä¸Šè§’é‚£ä¸ªé»‘è‰²çš„ï¼Œ39.99åˆ€"
# æˆæœ¬ï¼š$0.01

# ç»“è®ºï¼šç”¨æ–¹æ¡ˆBï¼ˆæˆªå›¾ï¼‰ï¼Œå› ä¸ºDOMå¤ªå¤§
```

#### Claude for Chrome çš„è¯„ä¼°è®¾è®¡

**ç›®æ ‡**ï¼šæ•™ Agent è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜äº¤äº’æ–¹å¼

```yaml
evaluation:
  name: "Tool Selection Correctness"

  tasks:
    # ===== åº”è¯¥ç”¨ DOM çš„åœºæ™¯ =====
    - scenario: "æ€»ç»“ç»´åŸºç™¾ç§‘æ–‡ç« "
      url: "https://en.wikipedia.org/wiki/Artificial_intelligence"
      expected_tool: "DOM_extraction"
      reason: "çº¯æ–‡æœ¬ï¼ŒDOM é«˜æ•ˆ"
      grading:
        - Agent ä½¿ç”¨äº† DOM âœ…
        - Token ä½¿ç”¨ < 100k
        - å®Œæˆæ—¶é—´ < 5s

    - scenario: "æå–æ–°é—»æ–‡ç« å…³é”®ä¿¡æ¯"
      url: "https://news.ycombinator.com"
      expected_tool: "DOM_extraction"
      reason: "æ–‡æœ¬ä¸ºä¸»ï¼ŒDOM åˆé€‚"

    # ===== åº”è¯¥ç”¨æˆªå›¾çš„åœºæ™¯ =====
    - scenario: "åœ¨äºšé©¬é€Šæ‰¾ç¬”è®°æœ¬åŒ…"
      url: "https://www.amazon.com/s?k=laptop+case"
      expected_tool: "screenshot"
      reason: "å¤æ‚å¸ƒå±€ï¼ŒDOM å¤ªå¤§"
      grading:
        - Agent ä½¿ç”¨äº†æˆªå›¾ âœ…
        - Token ä½¿ç”¨ < 5k
        - æˆåŠŸæ‰¾åˆ°å•†å“

    - scenario: "å¡«å†™å¤æ‚è¡¨å•"
      url: "https://forms.google.com/..."
      expected_tool: "screenshot"
      reason: "è§†è§‰äº¤äº’ï¼Œæˆªå›¾æ›´ç›´è§‚"

    # ===== æ··åˆåœºæ™¯ï¼ˆæµ‹è¯•åˆ¤æ–­èƒ½åŠ›ï¼‰=====
    - scenario: "åœ¨ GitHub ä¸ŠæŸ¥æ‰¾ç‰¹å®š Issue"
      url: "https://github.com/anthropics/anthropic-sdk-python/issues"
      expected_tool: "DOM_extraction"  # æ–‡æœ¬æœç´¢
      fallback: "screenshot"            # å¦‚æœDOMå¤ªå¤æ‚

  grader:
    type: composite
    checks:
      # 1. å·¥å…·é€‰æ‹©æ­£ç¡®æ€§
      - name: "Tool Choice"
        weight: 0.4
        logic: |
          if agent.tool == task.expected_tool:
              score = 1.0
          elif agent.tool == task.fallback:
              score = 0.7
          else:
              score = 0.0

      # 2. æ•ˆç‡
      - name: "Efficiency"
        weight: 0.3
        metrics:
          - tokens_used < task.token_budget
          - time_taken < task.time_budget

      # 3. ä»»åŠ¡å®Œæˆåº¦
      - name: "Success"
        weight: 0.3
        check: task_completed_successfully
```

**æˆæœ**ï¼š
- âœ… æµè§ˆå™¨ä»»åŠ¡å®Œæˆé€Ÿåº¦æå‡ 40%
- âœ… Token æˆæœ¬é™ä½ 60%
- âœ… å‡†ç¡®æ€§æé«˜ï¼ˆé€‰å¯¹å·¥å…·å¾ˆé‡è¦ï¼‰

#### è¡Œä¸šåŸºå‡†

**WebArena**ï¼š
- åœºæ™¯ï¼šæµè§ˆå™¨æ“ä½œ
- éªŒè¯ï¼šURLæ£€æŸ¥ + é¡µé¢çŠ¶æ€ + **åç«¯çŠ¶æ€**
- å…³é”®ï¼šä¸åªçœ‹"ç¡®è®¤é¡µé¢"ï¼Œè¿˜è¦æŸ¥æ•°æ®åº“

```python
# ä»»åŠ¡ï¼šåœ¨è´­ç‰©ç½‘ç«™ä¸‹å•
agent.execute("Buy the blue laptop case")

# å•çº¯çš„éªŒè¯ï¼ˆä¸å¤Ÿï¼‰
assert browser.url.contains("/order-confirmation")  # âŒ ä¸å¤Ÿ

# å®Œæ•´çš„éªŒè¯
assert browser.url.contains("/order-confirmation")   # å‰ç«¯æ˜¾ç¤º
assert database.query("SELECT * FROM orders WHERE user_id=?").exists  # åç«¯ç¡®è®¤
assert database.query("SELECT * FROM inventory WHERE item_id=?").stock_decreased  # åº“å­˜å‡å°‘
```

**OSWorld**ï¼š
- åœºæ™¯ï¼šå®Œæ•´æ“ä½œç³»ç»Ÿï¼ˆä¸åªæ˜¯æµè§ˆå™¨ï¼‰
- ä»»åŠ¡ï¼šç¼–è¾‘æ–‡æ¡£ã€å‘é‚®ä»¶ã€å†™ä»£ç ã€è¿è¡Œç¨‹åº
- éªŒè¯ï¼šæ–‡ä»¶ç³»ç»Ÿã€åº”ç”¨é…ç½®ã€æ•°æ®åº“ã€UI å…ƒç´ 

---

## 5. é©¯æœéç¡®å®šæ€§è¿™å¤´æ€ªå…½

### 5.1 é—®é¢˜ï¼šåŒä¸€ä¸ªä»»åŠ¡ï¼Œä»Šå¤©è¿‡æ˜å¤©æŒ‚

```python
# å‘¨ä¸€æµ‹è¯•
result = agent.run("å†™ä¸ªå†’æ³¡æ’åº")
# è¾“å‡ºï¼šå®Œç¾çš„ä»£ç  âœ…

# å‘¨äºŒæµ‹è¯•ï¼ˆåŒæ ·çš„promptï¼‰
result = agent.run("å†™ä¸ªå†’æ³¡æ’åº")
# è¾“å‡ºï¼šæœ‰ä¸ª off-by-one bug âŒ

# ä½ ï¼šï¼Ÿï¼Ÿï¼Ÿ
```

åŸå› ï¼š
- æ¨¡å‹æœ‰éšæœºæ€§ï¼ˆtemperature > 0ï¼‰
- é‡‡æ ·è¿‡ç¨‹ä¸åŒ
- ç”šè‡³ API ç‰ˆæœ¬å¯èƒ½å˜äº†

**ä¼ ç»Ÿè½¯ä»¶**ï¼šç¡®å®šæ€§ç³»ç»Ÿï¼Œæµ‹ä¸€æ¬¡å°±å¤Ÿ
**AI Agent**ï¼šæ¦‚ç‡æ€§ç³»ç»Ÿï¼Œæµ‹ä¸€æ¬¡æ˜¯**èµŒåš**

### 5.2 ä¸¤ä¸ªæ ¸å¿ƒæŒ‡æ ‡ï¼špass@k vs pass^k

![image.png](https://raw.githubusercontent.com/adongwanai/Awesome-Awesome-LLMs/main/20260113015254197.png)


#### pass@kï¼ˆè‡³å°‘æˆåŠŸä¸€æ¬¡å°±è¡Œï¼‰

**å®šä¹‰**ï¼šåœ¨ k æ¬¡å°è¯•ä¸­ï¼Œè‡³å°‘æœ‰ 1 æ¬¡æˆåŠŸçš„æ¦‚ç‡

**å…¬å¼**ï¼š
```
pass@k = 1 - (1 - p)^k

å…¶ä¸­ p = å•æ¬¡æˆåŠŸæ¦‚ç‡
```

**ç›´è§‰ç†è§£**ï¼šå°„ç®­ï¼Œåªè¦å°„ä¸­ä¸€æ¬¡å°±ç®—èµ¢

**ç¤ºä¾‹**ï¼š
```python
# å‡è®¾ Agent å•æ¬¡æˆåŠŸç‡ = 50%
p = 0.5

pass@1 = 1 - (1-0.5)^1 = 0.5      # 50%
pass@3 = 1 - (1-0.5)^3 = 0.875    # 87.5%
pass@10 = 1 - (1-0.5)^10 = 0.999  # 99.9%
```

**ç‰¹å¾**ï¼š
- k è¶Šå¤§ï¼Œpass@k è¶Šé«˜
- k â†’ âˆ æ—¶ï¼Œpass@k â†’ 100%
- åæ˜ "åªè¦èƒ½æˆåŠŸä¸€æ¬¡"çš„èƒ½åŠ›

**é€‚ç”¨åœºæ™¯**ï¼š
```python
# åœºæ™¯1ï¼šä»£ç è¡¥å…¨
copilot.suggest(code, n=5)  # ç»™5ä¸ªå»ºè®®
# ç”¨æˆ·ä¼šé€‰æœ€å¥½çš„é‚£ä¸ª
# è¯„ä¼°æŒ‡æ ‡ï¼špass@5ï¼ˆ5ä¸ªé‡Œæœ‰1ä¸ªå¥½çš„å°±è¡Œï¼‰

# åœºæ™¯2ï¼šåˆ›æ„ç”Ÿæˆ
agent.generate_ideas(topic, n=10)
# ç”¨æˆ·ä¼šæŒ‘é€‰å–œæ¬¢çš„
# è¯„ä¼°æŒ‡æ ‡ï¼špass@10

# åœºæ™¯3ï¼šç ”ç©¶è¾…åŠ©
agent.search_papers(query, n=20)
# ç”¨æˆ·ä¼šç­›é€‰ç›¸å…³çš„
# è¯„ä¼°æŒ‡æ ‡ï¼špass@20
```

**å…³é”®ç‰¹ç‚¹**ï¼šæœ‰äººç±»åœ¨æœ€åæŠŠå…³ï¼ŒAgent å¯ä»¥"è¯•é”™"

#### pass^kï¼ˆæ¯æ¬¡éƒ½è¦æˆåŠŸï¼‰

**å®šä¹‰**ï¼šåœ¨ k æ¬¡å°è¯•ä¸­ï¼Œå…¨éƒ¨æˆåŠŸçš„æ¦‚ç‡

**å…¬å¼**ï¼š
```
pass^k = p^k

å…¶ä¸­ p = å•æ¬¡æˆåŠŸæ¦‚ç‡
```

**ç›´è§‰ç†è§£**ï¼šè€ƒè¯•ï¼Œæ¯æ¬¡éƒ½è¦åŠæ ¼æ‰èƒ½æ¯•ä¸š

**ç¤ºä¾‹**ï¼š
```python
# å‡è®¾ Agent å•æ¬¡æˆåŠŸç‡ = 75%ï¼ˆçœ‹èµ·æ¥ä¸é”™ï¼‰
p = 0.75

pass^1 = 0.75^1 = 0.75     # 75%
pass^3 = 0.75^3 = 0.42     # 42%ï¼ˆè¿ç»­3æ¬¡éƒ½å¯¹çš„æ¦‚ç‡ï¼‰
pass^10 = 0.75^10 = 0.056  # 5.6%ï¼ˆè¿ç»­10æ¬¡éƒ½å¯¹ï¼Ÿéš¾ï¼ï¼‰
```

**ç‰¹å¾**ï¼š
- k è¶Šå¤§ï¼Œpass^k è¶Šä½ï¼ˆæŒ‡æ•°ä¸‹é™ï¼‰
- k â†’ âˆ æ—¶ï¼Œpass^k â†’ 0%
- åæ˜ "ç¨³å®šæ€§"

**é€‚ç”¨åœºæ™¯**ï¼š
```python
# åœºæ™¯1ï¼šè‡ªåŠ¨å®¢æœ
customer_service_agent.handle_ticket()
# æ¯ä¸ªç”¨æˆ·éƒ½æœŸæœ›å¾—åˆ°æ­£ç¡®å›ç­”
# ä¸èƒ½è¯´"å¤šé—®å‡ æ¬¡æ€»æœ‰ä¸€æ¬¡å¯¹çš„"
# è¯„ä¼°æŒ‡æ ‡ï¼špass^100ï¼ˆ100ä¸ªç”¨æˆ·éƒ½æ»¡æ„ï¼‰

# åœºæ™¯2ï¼šé‡‘èäº¤æ˜“
trading_agent.execute_order()
# æ¯ç¬”äº¤æ˜“éƒ½ä¸èƒ½å‡ºé”™
# ä¸€æ¬¡å¤±è¯¯ = æŸå¤±çœŸé‡‘ç™½é“¶
# è¯„ä¼°æŒ‡æ ‡ï¼špass^1000

# åœºæ™¯3ï¼šåŒ»ç–—è¯Šæ–­
medical_agent.diagnose(symptoms)
# æ¯ä¸ªæ‚£è€…éƒ½éœ€è¦å‡†ç¡®è¯Šæ–­
# ä¸èƒ½è¯´"å¤šè¯Šæ–­å‡ æ¬¡ç¢°è¿æ°”"
# è¯„ä¼°æŒ‡æ ‡ï¼špass^500
```

**å…³é”®ç‰¹ç‚¹**ï¼šæ— äººæŠŠå…³ï¼ŒAgent å¿…é¡»"é›¶å¤±è¯¯"

### 5.3 å¯¹æ¯”ï¼šå·®è·æƒŠäºº

**åœºæ™¯**ï¼šå•æ¬¡æˆåŠŸç‡ 75% çš„ Agent

| å°è¯•æ¬¡æ•° k | pass@kï¼ˆè‡³å°‘1æ¬¡æˆåŠŸï¼‰ | pass^kï¼ˆæ¯æ¬¡éƒ½æˆåŠŸï¼‰ | å·®è· |
|-----------|---------------------|-------------------|------|
| 1 | 75% | 75% | 0% |
| 3 | 98.4% | 42.2% | 56.2% |
| 10 | 99.99% | 5.6% | **94.4%** |

**ç»“è®º**ï¼š
- pass@10 è¯´ï¼šè¿™ Agent å‡ ä¹å®Œç¾ï¼ˆ99.99%ï¼‰
- pass^10 è¯´ï¼šè¿™ Agent åŸºæœ¬ä¸å¯ç”¨ï¼ˆ5.6%ï¼‰

**ä¸¤è€…éƒ½å¯¹**ï¼Œåªæ˜¯è¡¡é‡çš„ç»´åº¦ä¸åŒã€‚

### 5.4 äº§å“å†³ç­–æ ‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ‰äººç±»åœ¨å›è·¯ä¸­æŠŠå…³å—ï¼Ÿ           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
     â”‚           â”‚
   æœ‰ â“         æ—  â“
     â”‚           â”‚
     â–¼           â–¼
  ç”¨ pass@k   ç”¨ pass^k
  ä¼˜åŒ–å³°å€¼æ€§èƒ½  ä¼˜åŒ–ç¨³å®šæ€§
     â”‚           â”‚
     â–¼           â–¼
  ç¤ºä¾‹ï¼š        ç¤ºä¾‹ï¼š
  - ä»£ç è¡¥å…¨    - è‡ªåŠ¨å®¢æœ
  - åˆ›æ„ç”Ÿæˆ    - é‡‘èäº¤æ˜“
  - ç ”ç©¶è¾…åŠ©    - åŒ»ç–—è¯Šæ–­
  - è®¾è®¡æ–¹æ¡ˆ    - å†…å®¹å®¡æ ¸
```

### 5.5 å·¥ç¨‹å®è·µï¼šé’ˆå¯¹æ€§ä¼˜åŒ–

**ä¼˜åŒ– pass@k**ï¼ˆå³°å€¼æ€§èƒ½ï¼‰ï¼š

```python
# ç­–ç•¥ï¼šå¢åŠ å¤šæ ·æ€§ï¼Œè®© Agent å¤šå°è¯•ä¸åŒæ–¹æ¡ˆ

agent_config = {
    "temperature": 0.9,        # æé«˜éšæœºæ€§
    "top_p": 0.95,             # å¢åŠ é‡‡æ ·èŒƒå›´
    "n": 10,                   # ä¸€æ¬¡ç”Ÿæˆ10ä¸ªæ–¹æ¡ˆ
    "diversity_penalty": 0.5   # é¼“åŠ±ç”Ÿæˆä¸åŒçš„æ–¹æ¡ˆ
}

# åå¤„ç†ï¼šæ’åº/ç­›é€‰
results = agent.generate(n=10)
best = ranking_model.select_best(results)
```

**ä¼˜åŒ– pass^k**ï¼ˆç¨³å®šæ€§ï¼‰ï¼š

```python
# ç­–ç•¥ï¼šé™ä½éšæœºæ€§ï¼Œè®© Agent æ¯æ¬¡éƒ½ä¸€æ ·

agent_config = {
    "temperature": 0.1,        # é™ä½éšæœºæ€§
    "top_p": 0.9,              # æ”¶çª„é‡‡æ ·èŒƒå›´
    "n": 1,                    # åªç”Ÿæˆ1ä¸ªæ–¹æ¡ˆ
    "use_chain_of_thought": True,  # å¢å¼ºæ¨ç†ç¨³å®šæ€§
    "self_verification": True  # è‡ªæˆ‘éªŒè¯
}

# é¢å¤–æªæ–½ï¼š
# 1. æ€ç»´é“¾ï¼ˆè®© Agent ä¸€æ­¥æ­¥æ€è€ƒï¼Œä¸è¦è·³æ­¥ï¼‰
# 2. è‡ªæˆ‘éªŒè¯ï¼ˆè®© Agent æ£€æŸ¥è‡ªå·±çš„è¾“å‡ºï¼‰
# 3. ç¡®å®šæ€§é‡‡æ ·ï¼ˆå›ºå®š seedï¼‰
```

**çœŸå®æ¡ˆä¾‹**ï¼š

æŸå›¢é˜Ÿå¼€å‘ä»£ç è¡¥å…¨ Agentï¼š

**åˆç‰ˆ**ï¼ˆä¼˜åŒ– pass^1ï¼‰ï¼š
```python
config = {
    "temperature": 0.1,  # è¿½æ±‚ç¨³å®š
    "n": 1
}

# ç»“æœï¼š
pass@1 = 0.6   # 60%çš„æ—¶å€™ç¬¬ä¸€æ¬¡å°±å¯¹
pass@5 = 0.88  # ä½†ç”¨æˆ·è¯•5æ¬¡ï¼Œ88%èƒ½æ‰¾åˆ°å¯¹çš„
```

**æ”¹è¿›ç‰ˆ**ï¼ˆä¼˜åŒ– pass@5ï¼‰ï¼š
```python
config = {
    "temperature": 0.8,  # å¢åŠ å¤šæ ·æ€§
    "n": 5               # ä¸€æ¬¡ç»™5ä¸ªå»ºè®®
}

# ç»“æœï¼š
pass@1 = 0.5   # ç¬¬ä¸€ä¸ªå»ºè®®åªå¯¹50%
pass@5 = 0.96  # ä½†5ä¸ªé‡Œæ€»æœ‰1ä¸ªå¯¹ï¼ˆ96%ï¼‰
```

**å†³ç­–**ï¼šç”¨æ”¹è¿›ç‰ˆï¼Œå› ä¸ºç”¨æˆ·ä¼šè‡ªå·±é€‰ã€‚

---

## 6. ä»é›¶å¼€å§‹çš„å…«æ­¥è·¯çº¿å›¾

![image.png](https://raw.githubusercontent.com/adongwanai/Awesome-Awesome-LLMs/main/20260113015319789.png)


å¾ˆå¤šå›¢é˜Ÿä¸åšè¯„ä¼°çš„ç†ç”±ï¼š
> "æˆ‘ä»¬æ ·æœ¬å¤ªå°‘äº†ï¼Œåšè¯„ä¼°ä¸å‡†ã€‚"

Anthropic çš„è§‚ç‚¹ï¼š
> **æ­£æ˜¯å› ä¸ºæ ·æœ¬å°‘ï¼Œæ‰è¦æ—©åšè¯„ä¼°ã€‚**

### Step 0ï¼šå°½æ—©å¼€å§‹ï¼ˆ20ä¸ªæ¡ˆä¾‹å°±å¤Ÿï¼‰

**å¸¸è§è¯¯åŒº**ï¼š
```python
if task_count < 1000:
    print("æ ·æœ¬ä¸å¤Ÿï¼Œè¯„ä¼°ä¸å‡†ï¼Œç­‰ç­‰å†è¯´")
    return
```

**æ­£ç¡®åšæ³•**ï¼š
```python
if task_count >= 20:
    print("å¤Ÿäº†ï¼Œå¼€å§‹è¯„ä¼°ï¼")
    build_eval_suite()
```

**ä¸ºä»€ä¹ˆ20ä¸ªå°±å¤Ÿï¼Ÿ**

| å¼€å‘é˜¶æ®µ | æ¯æ¬¡æ”¹åŠ¨çš„å½±å“ | éœ€è¦çš„æ ·æœ¬é‡ | åŸå›  |
|---------|--------------|-------------|------|
| æ—©æœŸåŸå‹ | å·¨å¤§ï¼ˆCohen's d > 0.8ï¼‰ | 20-50 | Prompt å¾®è°ƒå½±å“æ˜¾è‘— |
| æˆç†Ÿäº§å“ | å¾®å°ï¼ˆCohen's d < 0.3ï¼‰ | 200+ | ä¼˜åŒ–ç©ºé—´æ”¶çª„ |

**ç»Ÿè®¡å­¦ç›´è§‰**ï¼š
- æ—©æœŸï¼šæ”¹ä¸ª Promptï¼ŒæˆåŠŸç‡ä» 30% â†’ 70%ï¼ˆå·®å¼‚æ˜æ˜¾ï¼Œ10ä¸ªæ ·æœ¬éƒ½çœ‹å¾—å‡ºï¼‰
- åæœŸï¼šæ”¹ä¸ª Promptï¼ŒæˆåŠŸç‡ä» 85% â†’ 87%ï¼ˆå·®å¼‚å¾®å°ï¼Œéœ€è¦100+æ ·æœ¬ï¼‰

**çœŸå®æ¡ˆä¾‹**ï¼š

æŸå›¢é˜Ÿå¼€å‘å®¢æœ Agentï¼š

**ç¬¬1å‘¨**ï¼š
```python
# åªæœ‰5ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆæ‰‹åŠ¨æµ‹çš„ï¼‰
tasks = [
    "é€€æ¬¾", "æ”¹åœ°å€", "æŸ¥è®¢å•", "æŠ•è¯‰", "å’¨è¯¢"
]

# æ”¹äº† Prompt
pass_rate_before = 2/5  # 40%
pass_rate_after = 4/5   # 80%

# æ•ˆæœæ˜æ˜¾ï¼Œä½†æ˜¯...ä¸å¤ªç¡®å®šæ˜¯ä¸æ˜¯è¿æ°”å¥½
```

**ç¬¬2å‘¨**ï¼š
```python
# å¢åŠ åˆ°20ä¸ªæµ‹è¯•ç”¨ä¾‹
tasks = [...æ‰©å……åˆ°20ä¸ª...]

# å†æµ‹
pass_rate_before = 8/20   # 40%ï¼ˆç¡®è®¤äº†ï¼‰
pass_rate_after = 16/20   # 80%ï¼ˆç¡®è®¤äº†ï¼‰

# ç°åœ¨æœ‰ä¿¡å¿ƒäº†ï¼šè¿™ä¸ª Prompt æ”¹åŠ¨ç¡®å®æœ‰æ•ˆ
```

**ç¬¬3å‘¨**ï¼š
```python
# åˆå¢åŠ åˆ°100ä¸ªæµ‹è¯•ç”¨ä¾‹
tasks = [...æ‰©å……åˆ°100ä¸ª...]

# ç»“æœ
pass_rate = 79/100  # 79%

# å‘ç°ï¼šè·Ÿ20ä¸ªæ¡ˆä¾‹çš„ç»“æœå¾ˆæ¥è¿‘ï¼ˆ80% vs 79%ï¼‰
# ç»“è®ºï¼š20ä¸ªæ¡ˆä¾‹çš„æ—¶å€™å°±å·²ç»åŸºæœ¬å‡†äº†
```

**æ•™è®­**ï¼š
- âœ… 20ä¸ªæ¡ˆä¾‹ï¼šè¶³å¤Ÿå‘ç°æ˜æ˜¾é—®é¢˜
- âœ… 50ä¸ªæ¡ˆä¾‹ï¼šè¶³å¤ŸéªŒè¯å¤§æ”¹åŠ¨
- âœ… 100+æ¡ˆä¾‹ï¼šç”¨äºç²¾ç¡®è°ƒä¼˜
- âŒ 1000ä¸ªæ¡ˆä¾‹ï¼šæ—©æœŸç”¨ä¸ä¸Šï¼ˆæµªè´¹æ—¶é—´ï¼‰

### Step 1ï¼šä»æ‰‹åŠ¨æµ‹è¯•å¼€å§‹ï¼ˆåˆ«é€ è½®å­ï¼‰

**é”™è¯¯åšæ³•**ï¼š
```python
# æŸå·¥ç¨‹å¸ˆçš„æƒ³æ³•ï¼š
"æˆ‘è¦è®¾è®¡ä¸€ä¸ªå®Œç¾çš„è¯„ä¼°ç³»ç»Ÿï¼"
"å…ˆè°ƒç ”30ç¯‡è®ºæ–‡..."
"å†è®¾è®¡æ¶æ„..."
"ç„¶åé€ 1000ä¸ªæµ‹è¯•ç”¨ä¾‹..."

# 3ä¸ªæœˆå
print("è¿˜æ²¡å¼€å§‹...")
```

**æ­£ç¡®åšæ³•**ï¼š
```python
# ç¬¬1å¤©ï¼šæŠŠä½ ç°åœ¨æ‰‹åŠ¨æµ‹çš„å†™ä¸‹æ¥
manual_tests = read_from_brain([
    "æ¯æ¬¡å‘ç‰ˆå‰ï¼Œæˆ‘ä¼šæµ‹é€€æ¬¾åŠŸèƒ½",
    "æ¯æ¬¡å‘ç‰ˆå‰ï¼Œæˆ‘ä¼šæµ‹æ”¹åœ°å€åŠŸèƒ½",
    ...
])

# ç¬¬2å¤©ï¼šè½¬æˆè‡ªåŠ¨åŒ–
eval_tasks = [
    convert_to_yaml(test) for test in manual_tests
]

# ç¬¬3å¤©ï¼šå¼€å§‹è·‘
run_eval(eval_tasks)
```

**æ•°æ®æºä¼˜å…ˆçº§**ï¼š

**ä¼˜å…ˆçº§1ï¼šä½ å·²ç»åœ¨æµ‹çš„ä¸œè¥¿**
```yaml
# ä½ æ¯æ¬¡å‘ç‰ˆå‰éƒ½æ‰‹åŠ¨æµ‹è¿™äº›ï¼Œå¯¹å§ï¼Ÿ
checklist:
  - æµ‹è¯•é€€æ¬¾æµç¨‹
  - æµ‹è¯•æ”¹åœ°å€
  - æµ‹è¯•æŸ¥è®¢å•
  - æµ‹è¯•å®¢æœå¯¹è¯

# â†’ ç›´æ¥è½¬æˆ eval ä»»åŠ¡ï¼
```

**ä¼˜å…ˆçº§2ï¼šçº¿ä¸ŠBug**
```python
# ç¿» Bug Tracker
bugs = fetch_from_jira()

for bug in bugs:
    # æ¯ä¸ª bug = ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹
    task = {
        "id": bug.id,
        "description": bug.description,
        "expected": bug.expected_behavior,
        "actual": bug.actual_behavior
    }
    eval_tasks.append(task)
```

**ä¼˜å…ˆçº§3ï¼šç”¨æˆ·æŠ•è¯‰**
```python
# ç¿» Support Queue
tickets = fetch_support_tickets()

# é«˜é¢‘é—®é¢˜ = é«˜ä¼˜å…ˆçº§æµ‹è¯•ç”¨ä¾‹
top_issues = tickets.group_by("issue_type").sort_by("count")

for issue in top_issues:
    eval_tasks.append(issue_to_task(issue))
```

**è½¬æ¢ç¤ºä¾‹**ï¼š

```python
# å·¥å•
support_ticket = {
    "id": "#12345",
    "issue": "Agent æ— æ³•å¤„ç†å¸¦ç‰¹æ®Šå­—ç¬¦çš„æ–‡ä»¶å",
    "steps": [
        "ä¸Šä¼ æ–‡ä»¶ 'report (final).pdf'",
        "è¦æ±‚ç”Ÿæˆæ‘˜è¦"
    ],
    "expected": "æˆåŠŸç”Ÿæˆæ‘˜è¦",
    "actual": "æŠ¥é”™: Invalid filename"
}

# â†“ è½¬æ¢ â†“

eval_task = {
    "task_id": "special-char-filename",
    "description": "å¤„ç†å¸¦æ‹¬å·çš„æ–‡ä»¶å",
    "input": {
        "file": "report (final).pdf",
        "command": "ç”Ÿæˆæ‘˜è¦"
    },
    "graders": [
        {"type": "no_error"},
        {"type": "output_exists"}
    ]
}
```

### Step 2ï¼šç¼–å†™æ— æ­§ä¹‰ä»»åŠ¡ï¼ˆåˆ«å‘ Agentï¼‰

**é»„é‡‘æ ‡å‡†**ï¼š
> ä¸¤ä¸ªé¢†åŸŸä¸“å®¶ç‹¬ç«‹å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä¼šå¾—å‡ºç›¸åŒçš„"é€šè¿‡/å¤±è´¥"åˆ¤æ–­å—ï¼Ÿ

**å¸¸è§é”™è¯¯**ï¼š

#### é”™è¯¯1ï¼šéšå«å‡è®¾

```yaml
# âŒ çƒ‚ä»»åŠ¡
task: "å†™ä¸€ä¸ªæ’åºè„šæœ¬"

grader:
  - type: file_exists
    path: /tmp/sort.py  # â† ä½ å’‹çŸ¥é“ Agent ä¼šå­˜è¿™ï¼Ÿ
```

Agent å¿ƒé‡Œè‹¦ï¼š
- "ä½ è®©æˆ‘å†™è„šæœ¬ï¼Œæ²¡è¯´å­˜å“ªå•Š..."
- "æˆ‘å­˜ ~/sort.py ä¸è¡Œå—ï¼Ÿ"
- "æˆ‘å­˜ ./my_sorting_script.py ä¸è¡Œå—ï¼Ÿ"

**ç»“æœ**ï¼šAgent å†™äº†å®Œç¾çš„æ’åºç®—æ³•ï¼Œå´å› ä¸ºæ–‡ä»¶è·¯å¾„è¢«åˆ¤å¤±è´¥ã€‚

#### é”™è¯¯2ï¼šæ¨¡ç³Šæ ‡å‡†

```yaml
# âŒ çƒ‚ä»»åŠ¡
task: "ä¼˜åŒ–ä»£ç æ€§èƒ½"

grader:
  - type: llm_rubric
    criteria: "ä»£ç åº”è¯¥æ›´å¿«"  # â† å¤šå¿«ç®—å¿«ï¼Ÿ
```

Agent å¿ƒé‡Œè‹¦ï¼š
- "æˆ‘ä¼˜åŒ–äº†10%ï¼Œç®—å¿«å—ï¼Ÿ"
- "æˆ‘ä¼˜åŒ–äº†2å€ï¼Œä½†å¯è¯»æ€§å˜å·®äº†ï¼Œç®—å—ï¼Ÿ"

**æ­£ç¡®èŒƒä¾‹**ï¼š

#### æ­£ç¡®1ï¼šæ˜ç¡®è§„èŒƒ

```yaml
# âœ… å¥½ä»»åŠ¡
task: |
  ç¼–å†™å†’æ³¡æ’åºè„šæœ¬ï¼Œä¿å­˜ä¸º /tmp/sort.py

  è¦æ±‚ï¼š
  1. å‡½æ•°åï¼šbubble_sort
  2. è¾“å…¥ï¼šæ•´æ•°åˆ—è¡¨
  3. è¾“å‡ºï¼šæ’åºåçš„åˆ—è¡¨ï¼ˆå‡åºï¼‰
  4. ä¸èƒ½ä½¿ç”¨å†…ç½® sort()

grader:
  - type: file_exists
    path: /tmp/sort.py

  - type: function_test
    test_cases:
      - input: [3, 1, 2]
        output: [1, 2, 3]
      - input: []
        output: []
      - input: [1]
        output: [1]

  - type: code_check
    forbidden: ["list.sort", "sorted("]
```

#### æ­£ç¡®2ï¼šå¯é‡åŒ–æ ‡å‡†

```yaml
# âœ… å¥½ä»»åŠ¡
task: |
  ä¼˜åŒ– compute_stats() å‡½æ•°çš„æ€§èƒ½

  å½“å‰baselineï¼šå¤„ç†10000æ¡æ•°æ®éœ€è¦100ms

  ç›®æ ‡ï¼šé™ä½åˆ°50msä»¥ä¸‹ï¼ˆè‡³å°‘æå‡50%ï¼‰

grader:
  - type: performance_test
    test_data: dataset_10000.csv
    baseline: 100ms
    target: 50ms

  - type: correctness_test
    # ç¡®ä¿ä¼˜åŒ–åç»“æœä»ç„¶æ­£ç¡®
    test: test_stats_accuracy.py
```

### Step 3ï¼šæ„å»ºå¹³è¡¡é—®é¢˜é›†ï¼ˆé˜²æ­¢åæ‰§ç‹‚ï¼‰

![image.png](https://raw.githubusercontent.com/adongwanai/Awesome-Awesome-LLMs/main/20260113015335994.png)


**åé¢æ•™æï¼šWeb Search çš„ç¿»è½¦**

**åˆç‰ˆè¯„ä¼°**ï¼ˆå•è¾¹ï¼‰ï¼š
```yaml
# åªæµ‹"è¯¥æœç´¢çš„åœºæ™¯"
tasks:
  - "ä»Šå¤©åŒ—äº¬å¤©æ°”å¦‚ä½•ï¼Ÿ" â†’ should_search: true âœ“
  - "æœ€æ–°çš„GDPæ•°æ®" â†’ should_search: true âœ“
  - "æ¯”ç‰¹å¸å½“å‰ä»·æ ¼" â†’ should_search: true âœ“
```

**ç»“æœ**ï¼š
```python
# Agent å­¦åˆ°çš„"è§„å¾‹"
def should_search(query):
    return True  # æ‰€æœ‰é—®é¢˜éƒ½æœï¼
```

**ç¾éš¾åæœ**ï¼š
```
ç”¨æˆ·ï¼š"ä½ å¥½"
Agentï¼š[æ­£åœ¨æœç´¢..."ä½ å¥½"çš„å®šä¹‰]

ç”¨æˆ·ï¼š"1+1ç­‰äºå‡ "
Agentï¼š[æ­£åœ¨æœç´¢..."1+1çš„ç­”æ¡ˆ"]

æˆæœ¬ï¼šçˆ†ç‚¸ ğŸ’°ğŸ’°ğŸ’°
å»¶è¿Ÿï¼šçˆ†ç‚¸ ğŸŒğŸŒğŸŒ
ç”¨æˆ·ä½“éªŒï¼šçˆ†ç‚¸ ğŸ’¥ğŸ’¥ğŸ’¥
```

**æ”¹è¿›ç‰ˆè¯„ä¼°**ï¼ˆåŒè¾¹ï¼‰ï¼š
```yaml
tasks:
  # ========== æ­£ä¾‹ï¼šåº”è¯¥æœç´¢ ==========
  - query: "ä»Šå¤©åŒ—äº¬å¤©æ°”"
    should_search: true
    reason: "å®æ—¶æ•°æ®ï¼Œå¿…é¡»æœç´¢"

  - query: "ç‰¹æ–¯æ‹‰æœ€æ–°è‚¡ä»·"
    should_search: true
    reason: "å®æ—¶æ•°æ®ï¼Œå¿…é¡»æœç´¢"

  # ========== åä¾‹ï¼šä¸åº”æœç´¢ ==========
  - query: "è‹¹æœå…¬å¸åˆ›å§‹äººæ˜¯è°"
    should_search: false
    reason: "å¸¸è¯†é—®é¢˜ï¼Œæ¨¡å‹çŸ¥é“"

  - query: "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ "
    should_search: false
    reason: "æ¦‚å¿µé—®é¢˜ï¼Œæ¨¡å‹çŸ¥é“"

  - query: "1+1ç­‰äºå‡ "
    should_search: false
    reason: "åŸºç¡€æ•°å­¦ï¼Œåˆ«æµªè´¹é’±"
```

**è¯„ä¼°æŒ‡æ ‡**ï¼š
```python
# ä¸¤ç§å¤±è´¥
undertrigger = è¯¥æœä¸æœï¼ˆåŠŸèƒ½ç¼ºå¤±ï¼‰
overtrigger = ä¸è¯¥æœä¹±æœï¼ˆèµ„æºæµªè´¹ï¼‰

# å¹³è¡¡æŒ‡æ ‡
precision = TP / (TP + FP)  # æœçš„éƒ½å¯¹å—ï¼Ÿ
recall = TP / (TP + FN)     # è¯¥æœçš„éƒ½æœäº†å—ï¼Ÿ

# ç»¼åˆè¯„åˆ†
f1 = 2 * precision * recall / (precision + recall)

# ç›®æ ‡ï¼šF1 > 0.9
```

**ç›®æ ‡é…æ¯”**ï¼š
```python
positive_cases = 50  # åº”è¯¥è§¦å‘
negative_cases = 50  # ä¸åº”è¯¥è§¦å‘

# ç†æƒ³ï¼š50/50
# å¯æ¥å—ï¼š40/60 åˆ° 60/40
# å±é™©ï¼š90/10ï¼ˆä¼šäº§ç”Ÿåæ‰§ï¼‰
```

### Step 4ï¼šæ„å»ºç¨³å®šç¯å¢ƒï¼ˆåˆ«è®©ç¯å¢ƒèƒŒé”…ï¼‰

**ç¯å¢ƒæ±¡æŸ“çš„çœŸå®æ¡ˆä¾‹**ï¼š

#### æ¡ˆä¾‹1ï¼šGit History Leakï¼ˆAgent åœ¨ä½œå¼Šï¼‰

```bash
# ç¬¬1æ¬¡è¯•éªŒ
git init
# Agent å®Œæˆä»»åŠ¡ï¼Œæäº¤ä»£ç 
git commit -m "Solution for task #001"

# ç¬¬2æ¬¡è¯•éªŒï¼ˆå¿˜è®°æ¸…ç†ï¼‰
# Agent: "å’¦ï¼Œgit log é‡Œæœ‰ä¸Šæ¬¡çš„ç­”æ¡ˆï¼"
git log  # çœ‹åˆ°äº†ä¸Šæ¬¡çš„æäº¤
# Agent ç›´æ¥æŠ„ä¸Šæ¬¡çš„ç­”æ¡ˆ

# ç»“æœï¼šç¬¬2æ¬¡"æˆåŠŸç‡"è™šé«˜
```

**è§£å†³**ï¼š
```python
def run_trial_clean():
    # æ¯æ¬¡è¯•éªŒå‰
    subprocess.run(["rm", "-rf", ".git"])
    subprocess.run(["git", "init"])
    # ç¡®ä¿å¹²å‡€ç¯å¢ƒ
```

#### æ¡ˆä¾‹2ï¼šå…±äº«èµ„æºè€—å°½ï¼ˆç¯å¢ƒåœ¨æ‹–åè…¿ï¼‰

```python
# è·‘10ä¸ªè¯•éªŒ
for i in range(10):
    result = run_trial(task)
    results.append(result)

# ç»“æœï¼š
# Trial 1-3: æˆåŠŸ âœ…
# Trial 4-7: å˜æ…¢ ğŸŒ
# Trial 8-10: å¤±è´¥ âŒï¼ˆå†…å­˜ä¸è¶³ï¼‰

# åŸå› ï¼šå‰é¢çš„è¯•éªŒæ²¡é‡Šæ”¾èµ„æº
```

**è§£å†³**ï¼š
```yaml
# docker-compose.yml
services:
  eval-runner:
    image: eval-env:latest
    mem_limit: 4g
    cpus: 2
    restart: "no"  # â† å…³é”®ï¼šæ¯æ¬¡æ–°å®¹å™¨
```

#### æ¡ˆä¾‹3ï¼šç¼“å­˜æ®‹ç•™ï¼ˆå¹½çµæ•°æ®ï¼‰

```python
# ç¬¬1æ¬¡è¯•éªŒ
agent.process_data()
cache.set("result", data)  # ç¼“å­˜äº†ç»“æœ

# ç¬¬2æ¬¡è¯•éªŒ
agent.process_data()
# Agent: "å’¦ï¼Œç¼“å­˜é‡Œæœ‰æ•°æ®ï¼Œç›´æ¥ç”¨ï¼"
result = cache.get("result")  # ç”¨äº†ä¸Šæ¬¡çš„

# ç»“æœï¼šç¬¬2æ¬¡"æˆåŠŸ"æ˜¯å› ä¸ºç”¨äº†ç¬¬1æ¬¡çš„ç¼“å­˜
```

**ç¯å¢ƒéš”ç¦»æ£€æŸ¥æ¸…å•**ï¼š

```python
class EnvironmentIsolation:
    """ç¡®ä¿æ¯æ¬¡è¯•éªŒç¯å¢ƒå¹²å‡€"""

    def clean(self):
        # âœ… æ–‡ä»¶ç³»ç»Ÿ
        self.delete_workspace()
        self.create_fresh_workspace()

        # âœ… ç¯å¢ƒå˜é‡
        os.environ.clear()
        self.load_env_from_config()

        # âœ… ç¼“å­˜
        cache.flush_all()

        # âœ… æ•°æ®åº“
        db.drop_all_tables()
        db.init_schema()
        db.load_seed_data()

        # âœ… ç½‘ç»œçŠ¶æ€
        # (å®¹å™¨å†…ç½‘ç»œéš”ç¦»)

        # âœ… è¿›ç¨‹
        killall_previous_processes()

        # âœ… æ—¥å¿—
        logging.handlers.clear()

        # âœ… æ—¶é—´ï¼ˆå¦‚æœæœ‰ä¾èµ–æ—¶é—´çš„é€»è¾‘ï¼‰
        mock_time.set("2024-01-01 00:00:00")
```

### Step 5ï¼šè®¾è®¡è¯„åˆ†å™¨ï¼ˆé€‰å¯¹å·¥å…·å¾ˆé‡è¦ï¼‰

**å†³ç­–æ ‘**ï¼š

```
è¿™ä¸ªä»»åŠ¡æœ‰æ˜ç¡®çš„å®¢è§‚ç­”æ¡ˆå—ï¼Ÿ
â”‚
â”œâ”€ æœ‰ â†’ ç”¨ Code-based Grader
â”‚   â”‚
â”‚   â”œâ”€ ä»£ç ä»»åŠ¡ï¼Ÿ
â”‚   â”‚   â””â”€ å•å…ƒæµ‹è¯• âœ…
â”‚   â”‚
â”‚   â”œâ”€ æ•°å€¼è®¡ç®—ï¼Ÿ
â”‚   â”‚   â””â”€ ç²¾ç¡®åŒ¹é… âœ…
â”‚   â”‚
â”‚   â””â”€ ç»“æ„åŒ–è¾“å‡ºï¼Ÿ
â”‚       â””â”€ Schema éªŒè¯ âœ…
â”‚
â””â”€ æ²¡æœ‰ â†’ ç”¨ Model-based Grader
    â”‚
    â”œâ”€ éœ€è¦äººç±»æ ¡å‡† âš ï¸
    â”œâ”€ æŒ‰ç»´åº¦æ‹†åˆ†è¯„åˆ† âš ï¸
    â””â”€ è®¾ç½®é€ƒç”Ÿé—¨ âš ï¸
```

**åæ¨¡å¼ï¼šè¿‡åº¦åˆšæ€§**

```python
# âŒ åˆ«è¿™ä¹ˆå¹²
grader = ToolSequenceGrader(
    expected=[
        "search_files",
        "read_file",
        "edit_file",
        "run_tests"
    ]
)

# é—®é¢˜ï¼šAgent å¯èƒ½æœ‰å…¶ä»–åŒæ ·å¥½çš„è·¯å¾„
# æ¯”å¦‚å…ˆ run_tests å† edit_fileï¼ˆTDDå¼€å‘ï¼‰
```

**æ¨èï¼šæ£€æŸ¥ç»“æœè€Œéè·¯å¾„**

```python
# âœ… è¿™æ ·æ›´å¥½
graders = [
    OutcomeGrader(
        check_tests_pass=True
    ),
    CodeQualityGrader(
        rubric="quality.md"
    ),
    SecurityGrader(
        tools=["bandit", "semgrep"]
    )
]

# Agent çˆ±æ€ä¹ˆåšå°±æ€ä¹ˆåšï¼Œåªè¦ç»“æœå¯¹å°±è¡Œ
```

### Step 6-8ï¼šé•¿æœŸç»´æŠ¤ï¼ˆè¯„ä¼°æ˜¯æ´»ç‰©ï¼‰

ç”±äºç¯‡å¹…åŸå› ï¼Œåé¢æ­¥éª¤ç®€åŒ–è¯´æ˜ï¼š

**Step 6ï¼šè¯» Transcripts**ï¼ˆè¡€çš„æ•™è®­ï¼‰

> ä¸è¯»æ—¥å¿— = çå­æ‘¸è±¡

çœŸå®æ¡ˆä¾‹ï¼šCORE-Bench çš„ Opus 4.5
- åˆå§‹åˆ†æ•°ï¼š42%ï¼ˆåƒåœ¾ï¼Ÿï¼‰
- è¯»æ—¥å¿—å‘ç°ï¼šè¯„åˆ†å™¨çš„æµ®ç‚¹æ•°æ¯”è¾ƒæœ‰ bug
- ä¿®å¤åï¼š95%ï¼ˆå¤©æ‰ï¼ï¼‰

**Step 7ï¼šç›‘æ§é¥±å’Œ**ï¼ˆè¯„ä¼°ä¹Ÿä¼šè¿‡æ—¶ï¼‰

```python
if eval_score > 0.85:
    print("âš ï¸ è¯„ä¼°å¿«é¥±å’Œäº†ï¼Œè¯¥åŠ éš¾é¢˜äº†")
```

**Step 8ï¼šé•¿æœŸç»´æŠ¤**ï¼ˆè¯„ä¼°é©±åŠ¨å¼€å‘ï¼‰

```
äº§å“éœ€æ±‚ â†’ å…ˆå†™è¯„ä¼° â†’ ä¼˜åŒ–Agent â†’ è¾¾æ ‡ â†’ æ™‹å‡ä¸ºå›å½’æµ‹è¯•
```

---

## 7. è¯„ä¼°æ–¹æ³•çš„ç‘å£«å¥¶é…ªç»„åˆæ‹³

### 7.1 å•ä¸€æ–¹æ³•çš„å±€é™


**ç‘å£«å¥¶é…ªæ¨¡å‹**ï¼šæ¯ç§æ–¹æ³•éƒ½æœ‰"æ´"ï¼ˆç›²åŒºï¼‰ï¼Œå¤šå±‚å åŠ æ‰èƒ½å µä½æ‰€æœ‰æ¼æ´

| æ–¹æ³•    | èƒ½æŠ“ä½çš„é—®é¢˜      | æŠ“ä¸ä½çš„é—®é¢˜    | é˜¶æ®µ    |
| ----- | ----------- | --------- | ----- |
| è‡ªåŠ¨åŒ–è¯„ä¼° | å·²çŸ¥åœºæ™¯çš„å›å½’     | æœªçŸ¥çš„è¾¹ç•Œæƒ…å†µ   | å¼€å‘/CI |
| ç”Ÿäº§ç›‘æ§  | çœŸå®ç”¨æˆ·é‡åˆ°çš„é—®é¢˜   | ä¸Šçº¿å‰çœ‹ä¸åˆ°    | ä¸Šçº¿å   |
| A/Bæµ‹è¯• | æ•´ä½“æ•ˆæœæå‡/ä¸‹é™   | å…·ä½“å“ªé‡Œæœ‰é—®é¢˜   | é‡å¤§å˜æ›´  |
| ç”¨æˆ·åé¦ˆ  | æ„å¤–çš„ä¸¥é‡é—®é¢˜     | ç”¨æˆ·æ‡’å¾—æŠ¥çš„å°é—®é¢˜ | æŒç»­    |
| äººå·¥å®¡æŸ¥  | è´¨é‡ç»†èŠ‚ã€è¾¹ç•Œcase | è§„æ¨¡åŒ–è¦†ç›–     | æ¯å‘¨    |

**ç»„åˆç­–ç•¥**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è‡ªåŠ¨åŒ–è¯„ä¼°   â”‚ â† ç¬¬ä¸€é“é˜²çº¿ï¼ˆæ‹¦ä½æ˜æ˜¾bugï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“ï¼ˆæ¼è¿‡çš„é—®é¢˜ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”Ÿäº§ç›‘æ§     â”‚ â† ç¬¬äºŒé“é˜²çº¿ï¼ˆçœŸå®ç¯å¢ƒé—®é¢˜ï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“ï¼ˆæ¼è¿‡çš„é—®é¢˜ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A/Bæµ‹è¯•      â”‚ â† ç¬¬ä¸‰é“é˜²çº¿ï¼ˆæ•´ä½“æ•ˆæœï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“ï¼ˆæ¼è¿‡çš„é—®é¢˜ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨æˆ·åé¦ˆ     â”‚ â† ç¬¬å››é“é˜²çº¿ï¼ˆç”¨æˆ·å‘ç°ï¼‰
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â†“ï¼ˆæ¼è¿‡çš„é—®é¢˜ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ äººå·¥å®¡æŸ¥     â”‚ â† æœ€åé˜²çº¿ï¼ˆæ·±åº¦æ£€æŸ¥ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸åŒé˜¶æ®µçš„é…æ–¹**ï¼š

**å¼€å‘å‰æœŸ**ï¼ˆè¿˜æ²¡ç”¨æˆ·ï¼‰ï¼š
```yaml
primary: è‡ªåŠ¨åŒ–è¯„ä¼°ï¼ˆæ¯æ¬¡ commitï¼‰
secondary: äººå·¥å®¡æŸ¥ï¼ˆæ¯å‘¨æŠ½æ ·ï¼‰
minimal: å†…éƒ¨ dogfooding
```

**é¦–æ¬¡ä¸Šçº¿**ï¼š
```yaml
primary:
  - è‡ªåŠ¨åŒ–è¯„ä¼°ï¼ˆä¸Šçº¿å‰ï¼‰
  - ç”Ÿäº§ç›‘æ§ï¼ˆä¸Šçº¿åï¼‰
secondary: ç”¨æˆ·åé¦ˆ
preparing: A/B æµ‹è¯•åŸºç¡€è®¾æ–½
```

**è§„æ¨¡åŒ–é˜¶æ®µ**ï¼ˆå¾ˆå¤šç”¨æˆ·ï¼‰ï¼š
```yaml
continuous:
  - è‡ªåŠ¨åŒ–è¯„ä¼°ï¼ˆCI/CDï¼‰
  - ç”Ÿäº§ç›‘æ§ï¼ˆå®æ—¶ï¼‰
  - ç”¨æˆ·åé¦ˆï¼ˆæŒç»­ï¼‰
regular:
  - A/B æµ‹è¯•ï¼ˆé‡å¤§å˜æ›´ï¼‰
  - äººå·¥å®¡æŸ¥ï¼ˆæ¯å‘¨ï¼‰
periodic:
  - äººç±»ç ”ç©¶ï¼ˆæ¯å­£åº¦ï¼‰
```

---

## 8. å·¥å…·é€‰æ‹©ï¼šé¿å‘æŒ‡å—

### 8.1 ä¸»æµæ¡†æ¶é€Ÿè§ˆ

| æ¡†æ¶ | ä¸€å¥è¯æè¿° | é€‚åˆäººç¾¤ | å‘ |
|------|-----------|---------|-----|
| **Harbor** | å®¹å™¨åŒ–è¯„ä¼°ï¼Œäº‘åŸç”Ÿ | éœ€è¦éš”ç¦»ç¯å¢ƒçš„ï¼ˆä»£ç æ‰§è¡Œï¼‰ | é…ç½®å¤æ‚ |
| **Promptfoo** | è½»é‡çº§ï¼ŒYAMLé…ç½® | å¿«é€Ÿè¿­ä»£ï¼ŒPromptå·¥ç¨‹å¸ˆ | åŠŸèƒ½æœ‰é™ |
| **Braintrust** | å…¨ç”Ÿå‘½å‘¨æœŸç›‘æ§ | éœ€è¦ç”Ÿäº§è§‚æµ‹çš„ | å•†ä¸šäº§å“ |
| **LangSmith** | LangChain ç”Ÿæ€ | LangChain é‡åº¦ç”¨æˆ· | ç»‘å®šç”Ÿæ€ |
| **Langfuse** | å¼€æºè‡ªæ‰˜ç®¡ | æœ‰æ•°æ®åˆè§„è¦æ±‚çš„ | éœ€è¦è‡ªå·±è¿ç»´ |

### 8.2 é€‰æ‹©å†³ç­–æ ‘

```
éœ€è¦ä»£ç æ‰§è¡Œéš”ç¦»å—ï¼Ÿ
â”‚
â”œâ”€ æ˜¯ â†’ Harbor
â”‚
â””â”€ å¦ â†’ åœ¨ç”¨ LangChain å—ï¼Ÿ
    â”‚
    â”œâ”€ æ˜¯ â†’ LangSmith / Langfuse
    â”‚
    â””â”€ å¦ â†’ éœ€è¦ç”Ÿäº§ç›‘æ§å—ï¼Ÿ
        â”‚
        â”œâ”€ æ˜¯ â†’ Braintrust
        â”‚
        â””â”€ å¦ â†’ Promptfooï¼ˆæˆ–è‡ªå·±å†™ï¼‰
```

### 8.3 åŠ¡å®å»ºè®®

> **å…ˆé€‰ä¸ªå¤Ÿç”¨çš„ï¼ŒæŠŠç²¾åŠ›æŠ•åˆ°å†™å¥½è¯„ä¼°ä»»åŠ¡ä¸Šã€‚**

æ¡†æ¶åªæ˜¯å·¥å…·ï¼Œä»»åŠ¡æ‰æ˜¯æ ¸å¿ƒã€‚

ä¸€ä¸ªçƒ‚æ¡†æ¶+å¥½ä»»åŠ¡ > å¥½æ¡†æ¶+çƒ‚ä»»åŠ¡

---

## 9. æœ€åçš„çœŸç›¸ä¸å»ºè®®

### 9.1 æ ¸å¿ƒè¦ç‚¹

**è¯„ä¼°çš„ä»·å€¼**ï¼š
- ä¸æ˜¯ KPIï¼Œæ˜¯æ•‘å‘½ç¨»è‰
- å‰æœŸæŠ•å…¥å¯è§ï¼Œæ”¶ç›Šé•¿æœŸç´¯ç§¯
- æœ‰è¯„ä¼°çš„å›¢é˜Ÿï¼šæ•°å¤©è¿ç§»æ–°æ¨¡å‹
- æ— è¯„ä¼°çš„å›¢é˜Ÿï¼šæ•°å‘¨æ‰‹åŠ¨æµ‹è¯•

**æ¶æ„ç»„ä»¶**ï¼š
- Task + Trial + Grader + Transcript/Outcome + Harness
- Transcript å¯èƒ½æ’’è°ï¼ŒOutcome æ‰æ˜¯çœŸç›¸
- è¯„ä¼° Agent = è¯„ä¼° (Model + Harness) ç»„åˆ

**è¯„åˆ†å™¨**ï¼š
- Code-basedï¼šå®ˆé—¨å‘˜ï¼ˆå¿«ä½†å‚»ï¼‰
- Model-basedï¼šè‰ºæœ¯è¯„å§”ï¼ˆçµæ´»ä½†éœ€æ ¡å‡†ï¼‰
- Humanï¼šé»„é‡‘æ ‡å‡†ï¼ˆè´µä½†å‡†ï¼‰

**éç¡®å®šæ€§**ï¼š
- pass@kï¼šè‡³å°‘ä¸€æ¬¡æˆåŠŸï¼ˆæœ‰äººæŠŠå…³ï¼‰
- pass^kï¼šæ¯æ¬¡éƒ½æˆåŠŸï¼ˆæ— äººæŠŠå…³ï¼‰

**å·¥ç¨‹è·¯çº¿**ï¼š
1. å°½æ—©å¼€å§‹ï¼ˆ20ä¸ªå°±å¤Ÿï¼‰
2. ä»æ‰‹æµ‹è½¬æ¢
3. æ— æ­§ä¹‰ä»»åŠ¡
4. åŒè¾¹å¹³è¡¡
5. ç¨³å®šç¯å¢ƒ
6. è¯» transcripts
7. ç›‘æ§é¥±å’Œ
8. é•¿æœŸç»´æŠ¤

### 9.2 è¡ŒåŠ¨å»ºè®®

**å¦‚æœä½ è¿˜æ²¡æœ‰è¯„ä¼°ä½“ç³»**ï¼š

```python
# æœ¬å‘¨TO-DO
tasks = [
    "é€‰ä¸€ä¸ªæ¡†æ¶ï¼ˆæ¨è Promptfooï¼Œ5åˆ†é’Ÿä¸Šæ‰‹ï¼‰",
    "æ”¶é›†20ä¸ªæ‰‹åŠ¨æµ‹è¯•çš„æ¡ˆä¾‹",
    "è½¬æˆ YAML é…ç½®",
    "åœ¨ CI é‡Œè·‘èµ·æ¥"
]

# é¢„è®¡æ—¶é—´ï¼š1å¤©
# æ”¶ç›Šï¼šæ— ä»·
```

**å¦‚æœä½ å·²æœ‰åŸºç¡€è¯„ä¼°**ï¼š

```python
# æœ¬æœˆTO-DO
tasks = [
    "æ£€æŸ¥ä»»åŠ¡è´¨é‡ï¼ˆæœ‰æ­§ä¹‰çš„é‡å†™ï¼‰",
    "è¯»100æ¡å¤±è´¥çš„ transcriptsï¼ˆæ‰¾è§„å¾‹ï¼‰",
    "æ ¡å‡† LLM è¯„åˆ†å™¨ï¼ˆä¸äººç±»å¯¹æ¯”ï¼‰",
    "ç›‘æ§è¯„ä¼°é¥±å’Œï¼ˆ>85%è¦åŠ éš¾é¢˜ï¼‰"
]
```

**å¦‚æœä½ çš„è¯„ä¼°å·²æˆç†Ÿ**ï¼š

```python
# æœ¬å­£åº¦TO-DO
tasks = [
    "å»ºç«‹ EDD æµç¨‹ï¼ˆè¯„ä¼°é©±åŠ¨å¼€å‘ï¼‰",
    "èµ‹èƒ½äº§å“å›¢é˜Ÿè´¡çŒ®ä»»åŠ¡ï¼ˆé™ä½é—¨æ§›ï¼‰",
    "æ„å»ºç»Ÿä¸€çœ‹æ¿ï¼ˆè‡ªåŠ¨åŒ–+ç›‘æ§+åé¦ˆï¼‰",
    "å®šæœŸäººç±»ç ”ç©¶ï¼ˆæ ¡å‡†è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼‰"
]
```

### 9.3 æœ€åçš„æœ€å

**è¯„ä¼°ä¸æ˜¯è´Ÿæ‹…ï¼Œæ˜¯è§£æ”¾ç”Ÿäº§åŠ›çš„å·¥å…·ã€‚**

æ²¡æœ‰è¯„ä¼°ï¼š
```
æ”¹ä»£ç  â†’ æ‰‹åŠ¨æµ‹ â†’ ä¸Šçº¿ â†’ ç‚¸äº† â†’ å›æ»š â†’ å†æ”¹ â†’ å¾ªç¯
```

æœ‰è¯„ä¼°ï¼š
```
æ”¹ä»£ç  â†’ è‡ªåŠ¨æµ‹ â†’ é€šè¿‡ â†’ ä¸Šçº¿ â†’ å®‰å¿ƒç¡è§‰ ğŸ’¤
```

**è¯„ä¼°çš„æœ¬è´¨**ï¼š
- ä¸æ˜¯"è¯æ˜ Agent èƒ½åŠ›å¼º"
- è€Œæ˜¯"åœ¨å®ƒæç ¸ä¹‹å‰æ‹¦ä½å®ƒ"

å°±åƒå®‰å…¨æ°”å›Šï¼Œä½ å¸Œæœ›æ°¸è¿œç”¨ä¸ä¸Šï¼Œä½†å¿…é¡»æœ‰ã€‚

---

## é™„å½•ï¼šå¿«é€ŸæŸ¥è¯¢è¡¨

### A. è¯„ä¼°ç±»å‹

| ç±»å‹ | ç›®æ ‡é€šè¿‡ç‡ | é¢‘ç‡ | ä½œç”¨ |
|------|----------|------|------|
| èƒ½åŠ›è¯„ä¼° | ä»ä½çˆ¬å‡ | æ¯æ¬¡è¿­ä»£ | è¡¡é‡è¿›æ­¥ |
| å›å½’è¯„ä¼° | æ¥è¿‘100% | æ¯æ¬¡æäº¤ | é˜²å€’é€€ |

### B. Graderé€‰æ‹©

| åœºæ™¯ | ç”¨ä»€ä¹ˆ | æ³¨æ„ |
|------|--------|------|
| æœ‰å•å…ƒæµ‹è¯• | Code-based | æœ€å¯é  |
| ä»£ç è´¨é‡ | Model-based | éœ€ rubric |
| å¯¹è¯è´¨é‡ | Model-based | å¤šç»´åº¦ |
| ç ”ç©¶æ‰å®åº¦ | Code-based | å¼•ç”¨æ£€æŸ¥ |
| åˆ›æ„å†…å®¹ | Human | æ ¡å‡†ç”¨ |

### C. å¸¸è§é—®é¢˜

| ç—‡çŠ¶ | åŸå›  | è§£å†³ |
|------|------|------|
| 0% pass@100 | ä»»åŠ¡æœ‰é—®é¢˜ | æ£€æŸ¥å‚è€ƒç­”æ¡ˆ |
| åˆ†æ•°æ³¢åŠ¨ | ç¯å¢ƒä¸ç¨³å®š | åŠ å¼ºéš”ç¦» |
| æ”¹è¿›ä¸æ˜æ˜¾ | è¯„ä¼°é¥±å’Œ | åŠ éš¾é¢˜ |
| ç”Ÿäº§ä¸ç¬¦ | åˆ†å¸ƒåç§» | æ›´æ–°ä»»åŠ¡ |

### D. æ ¸å¿ƒå…¬å¼

```python
# éç¡®å®šæ€§æŒ‡æ ‡
pass_at_k = 1 - (1 - p) ** k
pass_pow_k = p ** k

# åˆ†ç±»æŒ‡æ ‡
precision = TP / (TP + FP)
recall = TP / (TP + FN)
f1 = 2 * precision * recall / (precision + recall)
```

![](https://mmbiz.qpic.cn/mmbiz_png/5fknb41ib9qEyDKnkjcT4bd38ljNdEGscMzUYibunoJ8KWC3aUv6EUpdes1rbU2Kp7TQXqFwMicLuciaz9q7tiaI3UQ/640?wx_fmt=png&from=appmsg)
