import{l as E,g as N}from"./progress.BedWysuu.js";(()=>{const m=document.getElementById("progress-question-source");if(!(m instanceof HTMLScriptElement))return;let a=[];try{const e=JSON.parse(m.textContent??"[]");Array.isArray(e)&&(a=e.filter(s=>{if(!s||typeof s!="object")return!1;const n=s;return typeof n.id=="string"&&typeof n.title=="string"&&typeof n.categoryName=="string"&&typeof n.frequency=="number"&&typeof n.href=="string"}))}catch{a=[]}const x=new Map(a.map(e=>[e.id,e])),p=document.getElementById("progress-completed"),f=document.getElementById("progress-favorite"),u=document.getElementById("progress-rate"),c=document.getElementById("progress-question-list");if(!(c instanceof HTMLElement))return;const g=()=>{const e=E(),s=N(a.length,e);p instanceof HTMLElement&&(p.textContent=String(s.completedCount)),f instanceof HTMLElement&&(f.textContent=String(s.favoriteCount)),u instanceof HTMLElement&&(u.textContent=`${s.completionRate}%`),c.innerHTML="";const n=[...e.completedIds,...e.favoriteIds.filter(t=>!e.completedIds.includes(t))];if(n.length===0){const t=document.createElement("p");t.className="text-sm text-slate-500",t.textContent="还没有收藏或完成的题目，去题库点击“查看详情”开始记录。",c.appendChild(t);return}for(const t of n){const d=x.get(t);if(!d)continue;const r=document.createElement("a");r.href=d.href,r.className="question-card bg-tertiary rounded-xl border border-slate-900/10 p-4 block";const i=document.createElement("p");i.className="font-semibold text-slate-900",i.textContent=d.title;const l=document.createElement("p");l.className="text-xs text-slate-500 mt-2",l.textContent=`${d.categoryName} · 频次 ${d.frequency}`;const o=document.createElement("p");o.className="text-xs mt-2";const y=e.completedIds.includes(t),C=e.favoriteIds.includes(t);y&&C?(o.textContent="已完成 · 已收藏",o.classList.add("text-emerald-600")):y?(o.textContent="已完成",o.classList.add("text-emerald-600")):(o.textContent="已收藏",o.classList.add("text-indigo-600")),r.appendChild(i),r.appendChild(l),r.appendChild(o),c.appendChild(r)}};window.addEventListener("storage",g),g()})();
